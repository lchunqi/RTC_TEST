ARM GAS  C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"control.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.ControlPrintf,"ax",%progbits
  20              		.align	1
  21              		.global	ControlPrintf
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	ControlPrintf:
  27              	.LVL0:
  28              	.LFB238:
  29              		.file 1 "App/Src/control.c"
   1:App/Src/control.c **** #include "control.h"
   2:App/Src/control.c **** #include "main.h"
   3:App/Src/control.c **** #include "string.h"
   4:App/Src/control.c **** #include <stdio.h>
   5:App/Src/control.c **** #include <stdarg.h>
   6:App/Src/control.c **** #include "user_tool.h"
   7:App/Src/control.c **** #include "lcd_driver.h"
   8:App/Src/control.c **** #include "devices.h"
   9:App/Src/control.c **** 
  10:App/Src/control.c **** #define CONTROL_RECEIVE_BUFF_NUMBER    1000
  11:App/Src/control.c **** #define CONTROL_TRANSMIT_BUFF_NUMBER   300
  12:App/Src/control.c **** #define CTRL_UART_TICK_CLEAR         50//50ms
  13:App/Src/control.c **** #define MAX_MESSAGE_BUFFER              10
  14:App/Src/control.c **** #define LCD_COMMAND_LENGTH              100
  15:App/Src/control.c **** #define CMD_HEAD                        0xEE
  16:App/Src/control.c **** #define CMD_TAIL                        0xFFFCFFFF
  17:App/Src/control.c **** 
  18:App/Src/control.c **** extern UART_HandleTypeDef huart2;
  19:App/Src/control.c **** static uint16_t g_rxCount = 0;		//
  20:App/Src/control.c **** static uint8_t controlRxBuf;
  21:App/Src/control.c **** uint8_t g_controlRxBuff[CONTROL_RECEIVE_BUFF_NUMBER] = {0};
  22:App/Src/control.c **** uint8_t g_controlTxBuff[CONTROL_TRANSMIT_BUFF_NUMBER] = {0};
  23:App/Src/control.c **** uint8_t g_cmdNumber = 0;
  24:App/Src/control.c **** uint16_t g_lastRead = 0;
  25:App/Src/control.c **** extern uint8_t g_screenId;
  26:App/Src/control.c **** extern uint16_t g_inputNumber;
  27:App/Src/control.c **** uint8_t g_commandList[MAX_MESSAGE_BUFFER][LCD_COMMAND_LENGTH] = {0};
  28:App/Src/control.c **** 
  29:App/Src/control.c **** void ControlPrintf(char* fmt,...)  
ARM GAS  C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s 			page 2


  30:App/Src/control.c **** {  
  30              		.loc 1 30 1 view -0
  31              		.cfi_startproc
  32              		@ args = 4, pretend = 16, frame = 8
  33              		@ frame_needed = 0, uses_anonymous_args = 1
  34              		.loc 1 30 1 is_stmt 0 view .LVU1
  35 0000 0FB4     		push	{r0, r1, r2, r3}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 16
  38              		.cfi_offset 0, -16
  39              		.cfi_offset 1, -12
  40              		.cfi_offset 2, -8
  41              		.cfi_offset 3, -4
  42 0002 F0B5     		push	{r4, r5, r6, r7, lr}
  43              	.LCFI1:
  44              		.cfi_def_cfa_offset 36
  45              		.cfi_offset 4, -36
  46              		.cfi_offset 5, -32
  47              		.cfi_offset 6, -28
  48              		.cfi_offset 7, -24
  49              		.cfi_offset 14, -20
  50 0004 83B0     		sub	sp, sp, #12
  51              	.LCFI2:
  52              		.cfi_def_cfa_offset 48
  53 0006 08AD     		add	r5, sp, #32
  54 0008 55F8047B 		ldr	r7, [r5], #4
  31:App/Src/control.c **** 	va_list ap;//
  55              		.loc 1 31 2 is_stmt 1 view .LVU2
  32:App/Src/control.c **** 	memset(g_controlTxBuff, 0, CONTROL_TRANSMIT_BUFF_NUMBER);
  56              		.loc 1 32 2 view .LVU3
  57 000c 0E4C     		ldr	r4, .L3
  58 000e 4FF49676 		mov	r6, #300
  59 0012 3246     		mov	r2, r6
  60 0014 0021     		movs	r1, #0
  61 0016 2046     		mov	r0, r4
  62 0018 FFF7FEFF 		bl	memset
  63              	.LVL1:
  33:App/Src/control.c **** 	va_start(ap, fmt);//
  64              		.loc 1 33 2 view .LVU4
  65 001c 0195     		str	r5, [sp, #4]
  34:App/Src/control.c **** 	vsnprintf((char*)g_controlTxBuff, CONTROL_TRANSMIT_BUFF_NUMBER, fmt, ap);//
  66              		.loc 1 34 2 view .LVU5
  67 001e 2B46     		mov	r3, r5
  68 0020 3A46     		mov	r2, r7
  69 0022 3146     		mov	r1, r6
  70 0024 2046     		mov	r0, r4
  71 0026 FFF7FEFF 		bl	vsnprintf
  72              	.LVL2:
  35:App/Src/control.c **** 	va_end(ap);
  73              		.loc 1 35 2 view .LVU6
  36:App/Src/control.c **** 	HAL_UART_Transmit(&huart2, g_controlTxBuff, strlen((char*)g_controlTxBuff), 1000);
  74              		.loc 1 36 2 view .LVU7
  75              		.loc 1 36 46 is_stmt 0 view .LVU8
  76 002a 2046     		mov	r0, r4
  77 002c FFF7FEFF 		bl	strlen
  78              	.LVL3:
  79              		.loc 1 36 2 view .LVU9
ARM GAS  C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s 			page 3


  80 0030 4FF47A73 		mov	r3, #1000
  81 0034 82B2     		uxth	r2, r0
  82 0036 2146     		mov	r1, r4
  83 0038 0448     		ldr	r0, .L3+4
  84 003a FFF7FEFF 		bl	HAL_UART_Transmit
  85              	.LVL4:
  37:App/Src/control.c **** }
  86              		.loc 1 37 1 view .LVU10
  87 003e 03B0     		add	sp, sp, #12
  88              	.LCFI3:
  89              		.cfi_def_cfa_offset 36
  90              		@ sp needed
  91 0040 BDE8F040 		pop	{r4, r5, r6, r7, lr}
  92              	.LCFI4:
  93              		.cfi_restore 14
  94              		.cfi_restore 7
  95              		.cfi_restore 6
  96              		.cfi_restore 5
  97              		.cfi_restore 4
  98              		.cfi_def_cfa_offset 16
  99 0044 04B0     		add	sp, sp, #16
 100              	.LCFI5:
 101              		.cfi_restore 3
 102              		.cfi_restore 2
 103              		.cfi_restore 1
 104              		.cfi_restore 0
 105              		.cfi_def_cfa_offset 0
 106 0046 7047     		bx	lr
 107              	.L4:
 108              		.align	2
 109              	.L3:
 110 0048 00000000 		.word	.LANCHOR0
 111 004c 00000000 		.word	huart2
 112              		.cfi_endproc
 113              	.LFE238:
 115              		.section	.rodata.control_usart_init.str1.4,"aMS",%progbits,1
 116              		.align	2
 117              	.LC0:
 118 0000 4C434420 		.ascii	"LCD uart init success...\012\000"
 118      75617274 
 118      20696E69 
 118      74207375 
 118      63636573 
 119              		.section	.text.control_usart_init,"ax",%progbits
 120              		.align	1
 121              		.global	control_usart_init
 122              		.syntax unified
 123              		.thumb
 124              		.thumb_func
 126              	control_usart_init:
 127              	.LFB239:
  38:App/Src/control.c **** 
  39:App/Src/control.c **** 
  40:App/Src/control.c **** void control_usart_init(void)
  41:App/Src/control.c **** {
 128              		.loc 1 41 1 is_stmt 1 view -0
 129              		.cfi_startproc
ARM GAS  C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s 			page 4


 130              		@ args = 0, pretend = 0, frame = 0
 131              		@ frame_needed = 0, uses_anonymous_args = 0
 132 0000 08B5     		push	{r3, lr}
 133              	.LCFI6:
 134              		.cfi_def_cfa_offset 8
 135              		.cfi_offset 3, -8
 136              		.cfi_offset 14, -4
  42:App/Src/control.c **** 	HAL_UART_Receive_IT(&huart2, &controlRxBuf, 1);		
 137              		.loc 1 42 2 view .LVU12
 138 0002 0122     		movs	r2, #1
 139 0004 0B49     		ldr	r1, .L7
 140 0006 0C48     		ldr	r0, .L7+4
 141 0008 FFF7FEFF 		bl	HAL_UART_Receive_IT
 142              	.LVL5:
  43:App/Src/control.c ****     memset(g_controlRxBuff, 0x00, sizeof(g_controlRxBuff));
 143              		.loc 1 43 5 view .LVU13
 144 000c 4FF47A72 		mov	r2, #1000
 145 0010 0021     		movs	r1, #0
 146 0012 0A48     		ldr	r0, .L7+8
 147 0014 FFF7FEFF 		bl	memset
 148              	.LVL6:
  44:App/Src/control.c **** 	memset(g_controlTxBuff, 0x00, sizeof(g_controlTxBuff));
 149              		.loc 1 44 2 view .LVU14
 150 0018 4FF49672 		mov	r2, #300
 151 001c 0021     		movs	r1, #0
 152 001e 0848     		ldr	r0, .L7+12
 153 0020 FFF7FEFF 		bl	memset
 154              	.LVL7:
  45:App/Src/control.c ****     ControlPrintf("LCD uart init success...\n");
 155              		.loc 1 45 5 view .LVU15
 156 0024 0748     		ldr	r0, .L7+16
 157 0026 FFF7FEFF 		bl	ControlPrintf
 158              	.LVL8:
  46:App/Src/control.c ****     SetScreen(DEFAULT_SCREEN_ID);
 159              		.loc 1 46 5 view .LVU16
 160 002a 0020     		movs	r0, #0
 161 002c FFF7FEFF 		bl	SetScreen
 162              	.LVL9:
  47:App/Src/control.c **** }
 163              		.loc 1 47 1 is_stmt 0 view .LVU17
 164 0030 08BD     		pop	{r3, pc}
 165              	.L8:
 166 0032 00BF     		.align	2
 167              	.L7:
 168 0034 00000000 		.word	.LANCHOR1
 169 0038 00000000 		.word	huart2
 170 003c 00000000 		.word	.LANCHOR2
 171 0040 00000000 		.word	.LANCHOR0
 172 0044 00000000 		.word	.LC0
 173              		.cfi_endproc
 174              	.LFE239:
 176              		.section	.text.lcd_find_command,"ax",%progbits
 177              		.align	1
 178              		.global	lcd_find_command
 179              		.syntax unified
 180              		.thumb
 181              		.thumb_func
ARM GAS  C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s 			page 5


 183              	lcd_find_command:
 184              	.LFB240:
  48:App/Src/control.c **** 
  49:App/Src/control.c **** 
  50:App/Src/control.c **** //可能情况：
  51:App/Src/control.c **** //1、一次接收了多条指令；
  52:App/Src/control.c **** //2、一条指令还没接收完全；
  53:App/Src/control.c **** //3、指令开始或结束符不正确；
  54:App/Src/control.c **** uint8_t lcd_find_command(void)
  55:App/Src/control.c **** {
 185              		.loc 1 55 1 is_stmt 1 view -0
 186              		.cfi_startproc
 187              		@ args = 0, pretend = 0, frame = 0
 188              		@ frame_needed = 0, uses_anonymous_args = 0
 189 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 190              	.LCFI7:
 191              		.cfi_def_cfa_offset 24
 192              		.cfi_offset 3, -24
 193              		.cfi_offset 4, -20
 194              		.cfi_offset 5, -16
 195              		.cfi_offset 6, -12
 196              		.cfi_offset 7, -8
 197              		.cfi_offset 14, -4
  56:App/Src/control.c ****     int i, j, k;
 198              		.loc 1 56 5 view .LVU19
  57:App/Src/control.c ****     uint32_t buffer = 0;
 199              		.loc 1 57 5 view .LVU20
 200              	.LVL10:
  58:App/Src/control.c ****     uint8_t isCmd = 0;
 201              		.loc 1 58 5 view .LVU21
  59:App/Src/control.c ****     uint8_t cmd_number = 0;
 202              		.loc 1 59 5 view .LVU22
  60:App/Src/control.c ****     if (g_rxCount < 6) { return cmd_number;  }
 203              		.loc 1 60 5 view .LVU23
 204              		.loc 1 60 19 is_stmt 0 view .LVU24
 205 0002 224B     		ldr	r3, .L22
 206 0004 1E88     		ldrh	r6, [r3]
 207              		.loc 1 60 8 view .LVU25
 208 0006 052E     		cmp	r6, #5
 209 0008 3DD9     		bls	.L18
  61:App/Src/control.c ****     for (i = g_lastRead; i < g_rxCount; i++) {
 210              		.loc 1 61 5 is_stmt 1 view .LVU26
 211              		.loc 1 61 12 is_stmt 0 view .LVU27
 212 000a 214B     		ldr	r3, .L22+4
 213 000c 1F88     		ldrh	r7, [r3]
 214              	.LVL11:
  59:App/Src/control.c ****     uint8_t cmd_number = 0;
 215              		.loc 1 59 13 view .LVU28
 216 000e 0024     		movs	r4, #0
  57:App/Src/control.c ****     uint8_t isCmd = 0;
 217              		.loc 1 57 14 view .LVU29
 218 0010 A446     		mov	ip, r4
 219              		.loc 1 61 5 view .LVU30
 220 0012 23E0     		b	.L11
 221              	.LVL12:
 222              	.L14:
  62:App/Src/control.c ****         if (g_controlRxBuff[i] != CMD_HEAD) {
ARM GAS  C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s 			page 6


  63:App/Src/control.c ****             continue;
  64:App/Src/control.c ****         }
  65:App/Src/control.c ****         k = 0;
  66:App/Src/control.c ****         isCmd = 0;
  67:App/Src/control.c ****         for (j = i; j < g_rxCount; j++) {
 223              		.loc 1 67 36 is_stmt 1 discriminator 2 view .LVU31
 224              		.loc 1 67 37 is_stmt 0 discriminator 2 view .LVU32
 225 0014 0133     		adds	r3, r3, #1
 226              	.LVL13:
 227              	.L13:
 228              		.loc 1 67 21 is_stmt 1 discriminator 1 view .LVU33
 229              		.loc 1 67 9 is_stmt 0 discriminator 1 view .LVU34
 230 0016 9E42     		cmp	r6, r3
 231 0018 1ADD     		ble	.L20
  68:App/Src/control.c ****             buffer = (buffer << 8) | g_controlRxBuff[j];
 232              		.loc 1 68 13 is_stmt 1 view .LVU35
 233              		.loc 1 68 53 is_stmt 0 view .LVU36
 234 001a 1E4A     		ldr	r2, .L22+8
 235 001c D05C     		ldrb	r0, [r2, r3]	@ zero_extendqisi2
 236              		.loc 1 68 20 view .LVU37
 237 001e 40EA0C2C 		orr	ip, r0, ip, lsl #8
 238              	.LVL14:
  69:App/Src/control.c ****             g_commandList[g_cmdNumber][k] = g_controlRxBuff[j];
 239              		.loc 1 69 13 is_stmt 1 view .LVU38
 240              		.loc 1 69 39 is_stmt 0 view .LVU39
 241 0022 1D4A     		ldr	r2, .L22+12
 242 0024 92F800E0 		ldrb	lr, [r2]	@ zero_extendqisi2
 243              		.loc 1 69 43 view .LVU40
 244 0028 1C4A     		ldr	r2, .L22+16
 245 002a 6425     		movs	r5, #100
 246 002c 05FB0E22 		mla	r2, r5, lr, r2
 247 0030 5054     		strb	r0, [r2, r1]
  70:App/Src/control.c ****             k++;
 248              		.loc 1 70 13 is_stmt 1 view .LVU41
 249              		.loc 1 70 14 is_stmt 0 view .LVU42
 250 0032 0131     		adds	r1, r1, #1
 251              	.LVL15:
  71:App/Src/control.c ****             if (buffer == CMD_TAIL) {
 252              		.loc 1 71 13 is_stmt 1 view .LVU43
 253              		.loc 1 71 16 is_stmt 0 view .LVU44
 254 0034 6FF44032 		mvn	r2, #196608
 255 0038 9445     		cmp	ip, r2
 256 003a EBD1     		bne	.L14
  72:App/Src/control.c ****                 isCmd = 1;
 257              		.loc 1 72 17 is_stmt 1 view .LVU45
 258              	.LVL16:
  73:App/Src/control.c ****                 cmd_number++;
 259              		.loc 1 73 17 view .LVU46
 260              		.loc 1 73 27 is_stmt 0 view .LVU47
 261 003c 0134     		adds	r4, r4, #1
 262              	.LVL17:
 263              		.loc 1 73 27 view .LVU48
 264 003e E4B2     		uxtb	r4, r4
 265              	.LVL18:
  74:App/Src/control.c ****                 g_cmdNumber++;
 266              		.loc 1 74 17 is_stmt 1 view .LVU49
 267              		.loc 1 74 28 is_stmt 0 view .LVU50
ARM GAS  C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s 			page 7


 268 0040 0EF1010E 		add	lr, lr, #1
 269 0044 144A     		ldr	r2, .L22+12
 270 0046 82F800E0 		strb	lr, [r2]
  75:App/Src/control.c ****                 i = j;
 271              		.loc 1 75 17 is_stmt 1 view .LVU51
 272              	.LVL19:
  76:App/Src/control.c ****                 break;
 273              		.loc 1 76 17 view .LVU52
  75:App/Src/control.c ****                 i = j;
 274              		.loc 1 75 19 is_stmt 0 view .LVU53
 275 004a 1F46     		mov	r7, r3
  72:App/Src/control.c ****                 cmd_number++;
 276              		.loc 1 72 23 view .LVU54
 277 004c 0122     		movs	r2, #1
 278              		.loc 1 76 17 view .LVU55
 279 004e 00E0     		b	.L15
 280              	.LVL20:
 281              	.L20:
  66:App/Src/control.c ****         for (j = i; j < g_rxCount; j++) {
 282              		.loc 1 66 15 view .LVU56
 283 0050 0022     		movs	r2, #0
 284              	.L15:
 285              	.LVL21:
  77:App/Src/control.c ****             }
  78:App/Src/control.c ****         }
  79:App/Src/control.c ****         
  80:App/Src/control.c ****         if (isCmd > 0 && (j + 1) >= g_rxCount) {//正常指令结束的，清空接收缓冲区
 286              		.loc 1 80 9 is_stmt 1 view .LVU57
 287              		.loc 1 80 12 is_stmt 0 view .LVU58
 288 0052 12B1     		cbz	r2, .L12
 289              		.loc 1 80 29 discriminator 1 view .LVU59
 290 0054 0133     		adds	r3, r3, #1
 291              	.LVL22:
 292              		.loc 1 80 23 discriminator 1 view .LVU60
 293 0056 B342     		cmp	r3, r6
 294 0058 09DA     		bge	.L21
 295              	.LVL23:
 296              	.L12:
  61:App/Src/control.c ****         if (g_controlRxBuff[i] != CMD_HEAD) {
 297              		.loc 1 61 41 is_stmt 1 discriminator 2 view .LVU61
  61:App/Src/control.c ****         if (g_controlRxBuff[i] != CMD_HEAD) {
 298              		.loc 1 61 42 is_stmt 0 discriminator 2 view .LVU62
 299 005a 0137     		adds	r7, r7, #1
 300              	.LVL24:
 301              	.L11:
  61:App/Src/control.c ****         if (g_controlRxBuff[i] != CMD_HEAD) {
 302              		.loc 1 61 26 is_stmt 1 discriminator 1 view .LVU63
  61:App/Src/control.c ****         if (g_controlRxBuff[i] != CMD_HEAD) {
 303              		.loc 1 61 5 is_stmt 0 discriminator 1 view .LVU64
 304 005c BE42     		cmp	r6, r7
 305 005e 13DD     		ble	.L10
  62:App/Src/control.c ****             continue;
 306              		.loc 1 62 9 is_stmt 1 view .LVU65
  62:App/Src/control.c ****             continue;
 307              		.loc 1 62 28 is_stmt 0 view .LVU66
 308 0060 0C4B     		ldr	r3, .L22+8
 309 0062 DB5D     		ldrb	r3, [r3, r7]	@ zero_extendqisi2
ARM GAS  C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s 			page 8


  62:App/Src/control.c ****             continue;
 310              		.loc 1 62 12 view .LVU67
 311 0064 EE2B     		cmp	r3, #238
 312 0066 F8D1     		bne	.L12
  67:App/Src/control.c ****             buffer = (buffer << 8) | g_controlRxBuff[j];
 313              		.loc 1 67 16 view .LVU68
 314 0068 3B46     		mov	r3, r7
  65:App/Src/control.c ****         isCmd = 0;
 315              		.loc 1 65 11 view .LVU69
 316 006a 0021     		movs	r1, #0
 317 006c D3E7     		b	.L13
 318              	.LVL25:
 319              	.L21:
  81:App/Src/control.c ****             memset(g_controlRxBuff, 0, CONTROL_RECEIVE_BUFF_NUMBER);
 320              		.loc 1 81 13 is_stmt 1 view .LVU70
 321 006e 4FF47A72 		mov	r2, #1000
 322              	.LVL26:
 323              		.loc 1 81 13 is_stmt 0 view .LVU71
 324 0072 0021     		movs	r1, #0
 325              	.LVL27:
 326              		.loc 1 81 13 view .LVU72
 327 0074 0748     		ldr	r0, .L22+8
 328 0076 FFF7FEFF 		bl	memset
 329              	.LVL28:
  82:App/Src/control.c ****             g_rxCount = 0;
 330              		.loc 1 82 13 is_stmt 1 view .LVU73
 331              		.loc 1 82 23 is_stmt 0 view .LVU74
 332 007a 0023     		movs	r3, #0
 333 007c 034A     		ldr	r2, .L22
 334 007e 1380     		strh	r3, [r2]	@ movhi
  83:App/Src/control.c ****             g_lastRead = 0;
 335              		.loc 1 83 13 is_stmt 1 view .LVU75
 336              		.loc 1 83 24 is_stmt 0 view .LVU76
 337 0080 034A     		ldr	r2, .L22+4
 338 0082 1380     		strh	r3, [r2]	@ movhi
  84:App/Src/control.c ****             break;
 339              		.loc 1 84 13 is_stmt 1 view .LVU77
 340 0084 00E0     		b	.L10
 341              	.LVL29:
 342              	.L18:
  60:App/Src/control.c ****     for (i = g_lastRead; i < g_rxCount; i++) {
 343              		.loc 1 60 33 is_stmt 0 view .LVU78
 344 0086 0024     		movs	r4, #0
 345              	.LVL30:
 346              	.L10:
  85:App/Src/control.c ****         }
  86:App/Src/control.c ****     }
  87:App/Src/control.c ****     return cmd_number;
  88:App/Src/control.c **** }
 347              		.loc 1 88 1 view .LVU79
 348 0088 2046     		mov	r0, r4
 349 008a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 350              	.L23:
 351              		.align	2
 352              	.L22:
 353 008c 00000000 		.word	.LANCHOR3
 354 0090 00000000 		.word	.LANCHOR4
ARM GAS  C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s 			page 9


 355 0094 00000000 		.word	.LANCHOR2
 356 0098 00000000 		.word	.LANCHOR5
 357 009c 00000000 		.word	.LANCHOR6
 358              		.cfi_endproc
 359              	.LFE240:
 361              		.section	.text.handle_one_message,"ax",%progbits
 362              		.align	1
 363              		.global	handle_one_message
 364              		.syntax unified
 365              		.thumb
 366              		.thumb_func
 368              	handle_one_message:
 369              	.LVL31:
 370              	.LFB241:
  89:App/Src/control.c **** 
  90:App/Src/control.c **** #define KEYBOARD_ID             3  
  91:App/Src/control.c **** #define BUTTON_SEND_ID          5
  92:App/Src/control.c **** #define BUTTON_RETURN_ID        6
  93:App/Src/control.c **** void handle_one_message(uint16_t screen_id, uint16_t moudle_id, uint8_t state, char* text)
  94:App/Src/control.c **** {
 371              		.loc 1 94 1 is_stmt 1 view -0
 372              		.cfi_startproc
 373              		@ args = 0, pretend = 0, frame = 8
 374              		@ frame_needed = 0, uses_anonymous_args = 0
 375              		.loc 1 94 1 is_stmt 0 view .LVU81
 376 0000 00B5     		push	{lr}
 377              	.LCFI8:
 378              		.cfi_def_cfa_offset 4
 379              		.cfi_offset 14, -4
 380 0002 83B0     		sub	sp, sp, #12
 381              	.LCFI9:
 382              		.cfi_def_cfa_offset 16
  95:App/Src/control.c ****     int number = 0;
 383              		.loc 1 95 5 is_stmt 1 view .LVU82
 384              		.loc 1 95 9 is_stmt 0 view .LVU83
 385 0004 0022     		movs	r2, #0
 386              	.LVL32:
 387              		.loc 1 95 9 view .LVU84
 388 0006 0192     		str	r2, [sp, #4]
  96:App/Src/control.c ****     switch (screen_id) {
 389              		.loc 1 96 5 is_stmt 1 view .LVU85
 390 0008 0528     		cmp	r0, #5
 391 000a 02D0     		beq	.L30
 392              	.LVL33:
 393              	.L24:
  97:App/Src/control.c ****         case 0:
  98:App/Src/control.c ****         break;
  99:App/Src/control.c ****         case SCREEN_INPUT_NUMBER:
 100:App/Src/control.c ****             switch (moudle_id) {
 101:App/Src/control.c ****                 case BUTTON_SEND_ID:
 102:App/Src/control.c ****                     set_chipid_devices(g_inputNumber);
 103:App/Src/control.c ****                 break;
 104:App/Src/control.c ****                 case BUTTON_RETURN_ID:
 105:App/Src/control.c ****                     g_screenId = SCREEN_MASSAGE_SHOW;
 106:App/Src/control.c ****                     SetScreen(g_screenId);
 107:App/Src/control.c ****                 break;
 108:App/Src/control.c ****                 case KEYBOARD_ID:
ARM GAS  C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s 			page 10


 109:App/Src/control.c ****                     CharToInt(text, 0, &number);
 110:App/Src/control.c ****                     g_inputNumber = number;
 111:App/Src/control.c ****                     show_chip_id();
 112:App/Src/control.c ****                 break;
 113:App/Src/control.c ****                 default: break;
 114:App/Src/control.c ****             }
 115:App/Src/control.c ****         break;
 116:App/Src/control.c ****         default:  break;
 117:App/Src/control.c ****     }
 118:App/Src/control.c **** }
 394              		.loc 1 118 1 is_stmt 0 view .LVU86
 395 000c 03B0     		add	sp, sp, #12
 396              	.LCFI10:
 397              		.cfi_remember_state
 398              		.cfi_def_cfa_offset 4
 399              		@ sp needed
 400 000e 5DF804FB 		ldr	pc, [sp], #4
 401              	.LVL34:
 402              	.L30:
 403              	.LCFI11:
 404              		.cfi_restore_state
 100:App/Src/control.c ****                 case BUTTON_SEND_ID:
 405              		.loc 1 100 13 is_stmt 1 view .LVU87
 406 0012 0529     		cmp	r1, #5
 407 0014 0ED0     		beq	.L26
 408 0016 0629     		cmp	r1, #6
 409 0018 11D0     		beq	.L27
 410 001a 0329     		cmp	r1, #3
 411 001c F6D1     		bne	.L24
 109:App/Src/control.c ****                     g_inputNumber = number;
 412              		.loc 1 109 21 view .LVU88
 413 001e 01AA     		add	r2, sp, #4
 414 0020 0021     		movs	r1, #0
 415              	.LVL35:
 109:App/Src/control.c ****                     g_inputNumber = number;
 416              		.loc 1 109 21 is_stmt 0 view .LVU89
 417 0022 1846     		mov	r0, r3
 418              	.LVL36:
 109:App/Src/control.c ****                     g_inputNumber = number;
 419              		.loc 1 109 21 view .LVU90
 420 0024 FFF7FEFF 		bl	CharToInt
 421              	.LVL37:
 110:App/Src/control.c ****                     show_chip_id();
 422              		.loc 1 110 21 is_stmt 1 view .LVU91
 110:App/Src/control.c ****                     show_chip_id();
 423              		.loc 1 110 35 is_stmt 0 view .LVU92
 424 0028 084B     		ldr	r3, .L31
 425 002a 019A     		ldr	r2, [sp, #4]
 426 002c 1A80     		strh	r2, [r3]	@ movhi
 111:App/Src/control.c ****                 break;
 427              		.loc 1 111 21 is_stmt 1 view .LVU93
 428 002e FFF7FEFF 		bl	show_chip_id
 429              	.LVL38:
 112:App/Src/control.c ****                 default: break;
 430              		.loc 1 112 17 view .LVU94
 431              		.loc 1 118 1 is_stmt 0 view .LVU95
 432 0032 EBE7     		b	.L24
ARM GAS  C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s 			page 11


 433              	.LVL39:
 434              	.L26:
 102:App/Src/control.c ****                 break;
 435              		.loc 1 102 21 is_stmt 1 view .LVU96
 436 0034 054B     		ldr	r3, .L31
 437              	.LVL40:
 102:App/Src/control.c ****                 break;
 438              		.loc 1 102 21 is_stmt 0 view .LVU97
 439 0036 1888     		ldrh	r0, [r3]
 440              	.LVL41:
 102:App/Src/control.c ****                 break;
 441              		.loc 1 102 21 view .LVU98
 442 0038 FFF7FEFF 		bl	set_chipid_devices
 443              	.LVL42:
 103:App/Src/control.c ****                 case BUTTON_RETURN_ID:
 444              		.loc 1 103 17 is_stmt 1 view .LVU99
 445 003c E6E7     		b	.L24
 446              	.LVL43:
 447              	.L27:
 105:App/Src/control.c ****                     SetScreen(g_screenId);
 448              		.loc 1 105 21 view .LVU100
 105:App/Src/control.c ****                     SetScreen(g_screenId);
 449              		.loc 1 105 32 is_stmt 0 view .LVU101
 450 003e 0320     		movs	r0, #3
 451              	.LVL44:
 105:App/Src/control.c ****                     SetScreen(g_screenId);
 452              		.loc 1 105 32 view .LVU102
 453 0040 034B     		ldr	r3, .L31+4
 454              	.LVL45:
 105:App/Src/control.c ****                     SetScreen(g_screenId);
 455              		.loc 1 105 32 view .LVU103
 456 0042 1870     		strb	r0, [r3]
 106:App/Src/control.c ****                 break;
 457              		.loc 1 106 21 is_stmt 1 view .LVU104
 458 0044 FFF7FEFF 		bl	SetScreen
 459              	.LVL46:
 107:App/Src/control.c ****                 case KEYBOARD_ID:
 460              		.loc 1 107 17 view .LVU105
 461 0048 E0E7     		b	.L24
 462              	.L32:
 463 004a 00BF     		.align	2
 464              	.L31:
 465 004c 00000000 		.word	g_inputNumber
 466 0050 00000000 		.word	g_screenId
 467              		.cfi_endproc
 468              	.LFE241:
 470              		.section	.text.get_one_message,"ax",%progbits
 471              		.align	1
 472              		.global	get_one_message
 473              		.syntax unified
 474              		.thumb
 475              		.thumb_func
 477              	get_one_message:
 478              	.LVL47:
 479              	.LFB242:
 119:App/Src/control.c **** 
 120:App/Src/control.c **** void get_one_message(uint8_t* command)
ARM GAS  C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s 			page 12


 121:App/Src/control.c **** {
 480              		.loc 1 121 1 view -0
 481              		.cfi_startproc
 482              		@ args = 0, pretend = 0, frame = 24
 483              		@ frame_needed = 0, uses_anonymous_args = 0
 484              		.loc 1 121 1 is_stmt 0 view .LVU107
 485 0000 10B5     		push	{r4, lr}
 486              	.LCFI12:
 487              		.cfi_def_cfa_offset 8
 488              		.cfi_offset 4, -8
 489              		.cfi_offset 14, -4
 490 0002 86B0     		sub	sp, sp, #24
 491              	.LCFI13:
 492              		.cfi_def_cfa_offset 32
 122:App/Src/control.c ****     uint16_t event;
 493              		.loc 1 122 5 is_stmt 1 view .LVU108
 123:App/Src/control.c ****     uint16_t screen_id;
 494              		.loc 1 123 5 view .LVU109
 124:App/Src/control.c ****     uint16_t moudle_id;
 495              		.loc 1 124 5 view .LVU110
 125:App/Src/control.c ****     uint8_t state = 0;
 496              		.loc 1 125 5 view .LVU111
 497              	.LVL48:
 126:App/Src/control.c ****     char text[20] = {0};
 498              		.loc 1 126 5 view .LVU112
 499              		.loc 1 126 10 is_stmt 0 view .LVU113
 500 0004 0022     		movs	r2, #0
 501 0006 0192     		str	r2, [sp, #4]
 502 0008 0292     		str	r2, [sp, #8]
 503 000a 0392     		str	r2, [sp, #12]
 504 000c 0492     		str	r2, [sp, #16]
 505 000e 0592     		str	r2, [sp, #20]
 127:App/Src/control.c **** 
 128:App/Src/control.c ****     uint32_t buffer = 0;
 506              		.loc 1 128 5 is_stmt 1 view .LVU114
 507              	.LVL49:
 129:App/Src/control.c ****     int l, k;
 508              		.loc 1 129 5 view .LVU115
 130:App/Src/control.c ****     for (l = 0; l < LCD_COMMAND_LENGTH; l++) {
 509              		.loc 1 130 5 view .LVU116
 510              		.loc 1 130 12 is_stmt 0 view .LVU117
 511 0010 1346     		mov	r3, r2
 512              	.LVL50:
 513              	.L34:
 514              		.loc 1 130 17 is_stmt 1 discriminator 1 view .LVU118
 515              		.loc 1 130 5 is_stmt 0 discriminator 1 view .LVU119
 516 0012 632B     		cmp	r3, #99
 517 0014 08DC     		bgt	.L35
 131:App/Src/control.c ****         buffer = ((buffer << 8) | command[l]);
 518              		.loc 1 131 9 is_stmt 1 view .LVU120
 519              		.loc 1 131 42 is_stmt 0 view .LVU121
 520 0016 C15C     		ldrb	r1, [r0, r3]	@ zero_extendqisi2
 521              		.loc 1 131 16 view .LVU122
 522 0018 41EA0222 		orr	r2, r1, r2, lsl #8
 523              	.LVL51:
 132:App/Src/control.c ****         if (buffer == CMD_TAIL) {
 524              		.loc 1 132 9 is_stmt 1 view .LVU123
ARM GAS  C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s 			page 13


 525              		.loc 1 132 12 is_stmt 0 view .LVU124
 526 001c 6FF44031 		mvn	r1, #196608
 527 0020 8A42     		cmp	r2, r1
 528 0022 01D0     		beq	.L35
 130:App/Src/control.c ****     for (l = 0; l < LCD_COMMAND_LENGTH; l++) {
 529              		.loc 1 130 41 is_stmt 1 discriminator 2 view .LVU125
 130:App/Src/control.c ****     for (l = 0; l < LCD_COMMAND_LENGTH; l++) {
 530              		.loc 1 130 42 is_stmt 0 discriminator 2 view .LVU126
 531 0024 0133     		adds	r3, r3, #1
 532              	.LVL52:
 130:App/Src/control.c ****     for (l = 0; l < LCD_COMMAND_LENGTH; l++) {
 533              		.loc 1 130 42 discriminator 2 view .LVU127
 534 0026 F4E7     		b	.L34
 535              	.L35:
 133:App/Src/control.c ****             break;
 134:App/Src/control.c ****         }
 135:App/Src/control.c ****     }
 136:App/Src/control.c ****     if (command[0] == CMD_HEAD && l < LCD_COMMAND_LENGTH) {
 536              		.loc 1 136 5 is_stmt 1 view .LVU128
 537              		.loc 1 136 16 is_stmt 0 view .LVU129
 538 0028 0278     		ldrb	r2, [r0]	@ zero_extendqisi2
 539              	.LVL53:
 540              		.loc 1 136 8 view .LVU130
 541 002a EE2A     		cmp	r2, #238
 542 002c 01D0     		beq	.L44
 543              	.LVL54:
 544              	.L33:
 137:App/Src/control.c ****         event = (command[1] << 8) + command[2];
 138:App/Src/control.c ****         if (event == 0xB111) {
 139:App/Src/control.c ****             screen_id = (command[3] << 8) + command[4];
 140:App/Src/control.c ****             moudle_id = (command[5] << 8) + command[6];
 141:App/Src/control.c ****             if (command[7] == 0x10) {
 142:App/Src/control.c ****                 state = command[l - 4];
 143:App/Src/control.c ****             } else if (command[7] == 0x11) {
 144:App/Src/control.c ****                 state = 2;
 145:App/Src/control.c ****                 for (k = 0; k + 10 < l; k++) {
 146:App/Src/control.c ****                     text[k] = command[7 + k];
 147:App/Src/control.c ****                 }
 148:App/Src/control.c ****             }
 149:App/Src/control.c ****             handle_one_message(screen_id, moudle_id, state, text);
 150:App/Src/control.c ****             // for (k = 0; k <= l; k++) {  UsbPrintf("%02X ", command[k]);   }
 151:App/Src/control.c ****         }
 152:App/Src/control.c ****     }
 153:App/Src/control.c **** }
 545              		.loc 1 153 1 view .LVU131
 546 002e 06B0     		add	sp, sp, #24
 547              	.LCFI14:
 548              		.cfi_remember_state
 549              		.cfi_def_cfa_offset 8
 550              		@ sp needed
 551 0030 10BD     		pop	{r4, pc}
 552              	.LVL55:
 553              	.L44:
 554              	.LCFI15:
 555              		.cfi_restore_state
 136:App/Src/control.c ****         event = (command[1] << 8) + command[2];
 556              		.loc 1 136 32 discriminator 1 view .LVU132
ARM GAS  C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s 			page 14


 557 0032 632B     		cmp	r3, #99
 558 0034 FBDC     		bgt	.L33
 137:App/Src/control.c ****         event = (command[1] << 8) + command[2];
 559              		.loc 1 137 9 is_stmt 1 view .LVU133
 137:App/Src/control.c ****         event = (command[1] << 8) + command[2];
 560              		.loc 1 137 25 is_stmt 0 view .LVU134
 561 0036 4178     		ldrb	r1, [r0, #1]	@ zero_extendqisi2
 137:App/Src/control.c ****         event = (command[1] << 8) + command[2];
 562              		.loc 1 137 44 view .LVU135
 563 0038 8278     		ldrb	r2, [r0, #2]	@ zero_extendqisi2
 137:App/Src/control.c ****         event = (command[1] << 8) + command[2];
 564              		.loc 1 137 15 view .LVU136
 565 003a 02EB0122 		add	r2, r2, r1, lsl #8
 566 003e 92B2     		uxth	r2, r2
 567              	.LVL56:
 138:App/Src/control.c ****             screen_id = (command[3] << 8) + command[4];
 568              		.loc 1 138 9 is_stmt 1 view .LVU137
 138:App/Src/control.c ****             screen_id = (command[3] << 8) + command[4];
 569              		.loc 1 138 12 is_stmt 0 view .LVU138
 570 0040 4BF21111 		movw	r1, #45329
 571 0044 8A42     		cmp	r2, r1
 572 0046 F2D1     		bne	.L33
 139:App/Src/control.c ****             moudle_id = (command[5] << 8) + command[6];
 573              		.loc 1 139 13 is_stmt 1 view .LVU139
 139:App/Src/control.c ****             moudle_id = (command[5] << 8) + command[6];
 574              		.loc 1 139 33 is_stmt 0 view .LVU140
 575 0048 C278     		ldrb	r2, [r0, #3]	@ zero_extendqisi2
 576              	.LVL57:
 139:App/Src/control.c ****             moudle_id = (command[5] << 8) + command[6];
 577              		.loc 1 139 52 view .LVU141
 578 004a 90F804C0 		ldrb	ip, [r0, #4]	@ zero_extendqisi2
 139:App/Src/control.c ****             moudle_id = (command[5] << 8) + command[6];
 579              		.loc 1 139 23 view .LVU142
 580 004e 0CEB022C 		add	ip, ip, r2, lsl #8
 581 0052 1FFA8CFC 		uxth	ip, ip
 582              	.LVL58:
 140:App/Src/control.c ****             if (command[7] == 0x10) {
 583              		.loc 1 140 13 is_stmt 1 view .LVU143
 140:App/Src/control.c ****             if (command[7] == 0x10) {
 584              		.loc 1 140 33 is_stmt 0 view .LVU144
 585 0056 4279     		ldrb	r2, [r0, #5]	@ zero_extendqisi2
 140:App/Src/control.c ****             if (command[7] == 0x10) {
 586              		.loc 1 140 52 view .LVU145
 587 0058 8179     		ldrb	r1, [r0, #6]	@ zero_extendqisi2
 140:App/Src/control.c ****             if (command[7] == 0x10) {
 588              		.loc 1 140 23 view .LVU146
 589 005a 01EB0221 		add	r1, r1, r2, lsl #8
 590 005e 89B2     		uxth	r1, r1
 591              	.LVL59:
 141:App/Src/control.c ****                 state = command[l - 4];
 592              		.loc 1 141 13 is_stmt 1 view .LVU147
 141:App/Src/control.c ****                 state = command[l - 4];
 593              		.loc 1 141 24 is_stmt 0 view .LVU148
 594 0060 C279     		ldrb	r2, [r0, #7]	@ zero_extendqisi2
 141:App/Src/control.c ****                 state = command[l - 4];
 595              		.loc 1 141 16 view .LVU149
 596 0062 102A     		cmp	r2, #16
ARM GAS  C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s 			page 15


 597 0064 07D0     		beq	.L45
 143:App/Src/control.c ****                 state = 2;
 598              		.loc 1 143 20 is_stmt 1 view .LVU150
 143:App/Src/control.c ****                 state = 2;
 599              		.loc 1 143 23 is_stmt 0 view .LVU151
 600 0066 112A     		cmp	r2, #17
 601 0068 16D0     		beq	.L42
 125:App/Src/control.c ****     char text[20] = {0};
 602              		.loc 1 125 13 view .LVU152
 603 006a 0022     		movs	r2, #0
 604              	.LVL60:
 605              	.L39:
 149:App/Src/control.c ****             // for (k = 0; k <= l; k++) {  UsbPrintf("%02X ", command[k]);   }
 606              		.loc 1 149 13 is_stmt 1 view .LVU153
 607 006c 01AB     		add	r3, sp, #4
 608 006e 6046     		mov	r0, ip
 609              	.LVL61:
 149:App/Src/control.c ****             // for (k = 0; k <= l; k++) {  UsbPrintf("%02X ", command[k]);   }
 610              		.loc 1 149 13 is_stmt 0 view .LVU154
 611 0070 FFF7FEFF 		bl	handle_one_message
 612              	.LVL62:
 613              		.loc 1 153 1 view .LVU155
 614 0074 DBE7     		b	.L33
 615              	.LVL63:
 616              	.L45:
 142:App/Src/control.c ****             } else if (command[7] == 0x11) {
 617              		.loc 1 142 17 is_stmt 1 view .LVU156
 142:App/Src/control.c ****             } else if (command[7] == 0x11) {
 618              		.loc 1 142 32 is_stmt 0 view .LVU157
 619 0076 043B     		subs	r3, r3, #4
 620              	.LVL64:
 142:App/Src/control.c ****             } else if (command[7] == 0x11) {
 621              		.loc 1 142 23 view .LVU158
 622 0078 C25C     		ldrb	r2, [r0, r3]	@ zero_extendqisi2
 623              	.LVL65:
 142:App/Src/control.c ****             } else if (command[7] == 0x11) {
 624              		.loc 1 142 23 view .LVU159
 625 007a F7E7     		b	.L39
 626              	.LVL66:
 627              	.L41:
 146:App/Src/control.c ****                 }
 628              		.loc 1 146 21 is_stmt 1 discriminator 3 view .LVU160
 146:App/Src/control.c ****                 }
 629              		.loc 1 146 41 is_stmt 0 discriminator 3 view .LVU161
 630 007c D41D     		adds	r4, r2, #7
 146:App/Src/control.c ****                 }
 631              		.loc 1 146 38 discriminator 3 view .LVU162
 632 007e 045D     		ldrb	r4, [r0, r4]	@ zero_extendqisi2
 146:App/Src/control.c ****                 }
 633              		.loc 1 146 29 discriminator 3 view .LVU163
 634 0080 02F1180E 		add	lr, r2, #24
 635 0084 EE44     		add	lr, sp, lr
 636 0086 0EF8144C 		strb	r4, [lr, #-20]
 145:App/Src/control.c ****                     text[k] = command[7 + k];
 637              		.loc 1 145 41 is_stmt 1 discriminator 3 view .LVU164
 145:App/Src/control.c ****                     text[k] = command[7 + k];
 638              		.loc 1 145 42 is_stmt 0 discriminator 3 view .LVU165
ARM GAS  C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s 			page 16


 639 008a 0132     		adds	r2, r2, #1
 640              	.LVL67:
 641              	.L40:
 145:App/Src/control.c ****                     text[k] = command[7 + k];
 642              		.loc 1 145 29 is_stmt 1 discriminator 1 view .LVU166
 145:App/Src/control.c ****                     text[k] = command[7 + k];
 643              		.loc 1 145 31 is_stmt 0 discriminator 1 view .LVU167
 644 008c 02F10A0E 		add	lr, r2, #10
 145:App/Src/control.c ****                     text[k] = command[7 + k];
 645              		.loc 1 145 17 discriminator 1 view .LVU168
 646 0090 9E45     		cmp	lr, r3
 647 0092 F3DB     		blt	.L41
 144:App/Src/control.c ****                 for (k = 0; k + 10 < l; k++) {
 648              		.loc 1 144 23 view .LVU169
 649 0094 0222     		movs	r2, #2
 650              	.LVL68:
 144:App/Src/control.c ****                 for (k = 0; k + 10 < l; k++) {
 651              		.loc 1 144 23 view .LVU170
 652 0096 E9E7     		b	.L39
 653              	.LVL69:
 654              	.L42:
 145:App/Src/control.c ****                     text[k] = command[7 + k];
 655              		.loc 1 145 24 view .LVU171
 656 0098 0022     		movs	r2, #0
 657 009a F7E7     		b	.L40
 658              		.cfi_endproc
 659              	.LFE242:
 661              		.section	.text.control_usart_receive,"ax",%progbits
 662              		.align	1
 663              		.global	control_usart_receive
 664              		.syntax unified
 665              		.thumb
 666              		.thumb_func
 668              	control_usart_receive:
 669              	.LFB243:
 154:App/Src/control.c **** 
 155:App/Src/control.c **** void control_usart_receive(void)//接收中断回调函数
 156:App/Src/control.c **** {
 670              		.loc 1 156 1 is_stmt 1 view -0
 671              		.cfi_startproc
 672              		@ args = 0, pretend = 0, frame = 0
 673              		@ frame_needed = 0, uses_anonymous_args = 0
 674 0000 08B5     		push	{r3, lr}
 675              	.LCFI16:
 676              		.cfi_def_cfa_offset 8
 677              		.cfi_offset 3, -8
 678              		.cfi_offset 14, -4
 157:App/Src/control.c ****     if (g_rxCount < CONTROL_RECEIVE_BUFF_NUMBER) {
 679              		.loc 1 157 5 view .LVU173
 680              		.loc 1 157 19 is_stmt 0 view .LVU174
 681 0002 094B     		ldr	r3, .L49
 682 0004 1B88     		ldrh	r3, [r3]
 683              		.loc 1 157 8 view .LVU175
 684 0006 B3F57A7F 		cmp	r3, #1000
 685 000a 06D2     		bcs	.L47
 158:App/Src/control.c ****         g_controlRxBuff[g_rxCount] = controlRxBuf;
 686              		.loc 1 158 9 is_stmt 1 view .LVU176
ARM GAS  C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s 			page 17


 687              		.loc 1 158 36 is_stmt 0 view .LVU177
 688 000c 074A     		ldr	r2, .L49+4
 689 000e 1178     		ldrb	r1, [r2]	@ zero_extendqisi2
 690 0010 074A     		ldr	r2, .L49+8
 691 0012 D154     		strb	r1, [r2, r3]
 159:App/Src/control.c ****         g_rxCount++;
 692              		.loc 1 159 9 is_stmt 1 view .LVU178
 693              		.loc 1 159 18 is_stmt 0 view .LVU179
 694 0014 0133     		adds	r3, r3, #1
 695 0016 044A     		ldr	r2, .L49
 696 0018 1380     		strh	r3, [r2]	@ movhi
 697              	.L47:
 160:App/Src/control.c ****     }
 161:App/Src/control.c ****     HAL_UART_Receive_IT(&huart2, &controlRxBuf, 1);
 698              		.loc 1 161 5 is_stmt 1 view .LVU180
 699 001a 0122     		movs	r2, #1
 700 001c 0349     		ldr	r1, .L49+4
 701 001e 0548     		ldr	r0, .L49+12
 702 0020 FFF7FEFF 		bl	HAL_UART_Receive_IT
 703              	.LVL70:
 162:App/Src/control.c **** }
 704              		.loc 1 162 1 is_stmt 0 view .LVU181
 705 0024 08BD     		pop	{r3, pc}
 706              	.L50:
 707 0026 00BF     		.align	2
 708              	.L49:
 709 0028 00000000 		.word	.LANCHOR3
 710 002c 00000000 		.word	.LANCHOR1
 711 0030 00000000 		.word	.LANCHOR2
 712 0034 00000000 		.word	huart2
 713              		.cfi_endproc
 714              	.LFE243:
 716              		.section	.text.CheckControlList,"ax",%progbits
 717              		.align	1
 718              		.global	CheckControlList
 719              		.syntax unified
 720              		.thumb
 721              		.thumb_func
 723              	CheckControlList:
 724              	.LFB244:
 163:App/Src/control.c **** 
 164:App/Src/control.c **** void CheckControlList(void)
 165:App/Src/control.c **** {
 725              		.loc 1 165 1 is_stmt 1 view -0
 726              		.cfi_startproc
 727              		@ args = 0, pretend = 0, frame = 0
 728              		@ frame_needed = 0, uses_anonymous_args = 0
 729 0000 70B5     		push	{r4, r5, r6, lr}
 730              	.LCFI17:
 731              		.cfi_def_cfa_offset 16
 732              		.cfi_offset 4, -16
 733              		.cfi_offset 5, -12
 734              		.cfi_offset 6, -8
 735              		.cfi_offset 14, -4
 166:App/Src/control.c ****     int i;
 736              		.loc 1 166 5 view .LVU183
 167:App/Src/control.c ****     if (lcd_find_command()) {
ARM GAS  C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s 			page 18


 737              		.loc 1 167 5 view .LVU184
 738              		.loc 1 167 9 is_stmt 0 view .LVU185
 739 0002 FFF7FEFF 		bl	lcd_find_command
 740              	.LVL71:
 741              		.loc 1 167 8 view .LVU186
 742 0006 A8B9     		cbnz	r0, .L55
 743              	.L51:
 168:App/Src/control.c ****         for (i = 0; i < g_cmdNumber; i++) {
 169:App/Src/control.c ****             get_one_message(g_commandList[i]);
 170:App/Src/control.c ****             memset(g_commandList[i], 0, LCD_COMMAND_LENGTH);
 171:App/Src/control.c ****         }
 172:App/Src/control.c ****         g_cmdNumber = 0;
 173:App/Src/control.c ****     }
 174:App/Src/control.c **** }
 744              		.loc 1 174 1 view .LVU187
 745 0008 70BD     		pop	{r4, r5, r6, pc}
 746              	.LVL72:
 747              	.L54:
 169:App/Src/control.c ****             memset(g_commandList[i], 0, LCD_COMMAND_LENGTH);
 748              		.loc 1 169 13 is_stmt 1 discriminator 3 view .LVU188
 169:App/Src/control.c ****             memset(g_commandList[i], 0, LCD_COMMAND_LENGTH);
 749              		.loc 1 169 42 is_stmt 0 discriminator 3 view .LVU189
 750 000a 6426     		movs	r6, #100
 751 000c 0A4C     		ldr	r4, .L57
 752 000e 06FB0544 		mla	r4, r6, r5, r4
 169:App/Src/control.c ****             memset(g_commandList[i], 0, LCD_COMMAND_LENGTH);
 753              		.loc 1 169 13 discriminator 3 view .LVU190
 754 0012 2046     		mov	r0, r4
 755 0014 FFF7FEFF 		bl	get_one_message
 756              	.LVL73:
 170:App/Src/control.c ****         }
 757              		.loc 1 170 13 is_stmt 1 discriminator 3 view .LVU191
 758 0018 3246     		mov	r2, r6
 759 001a 0021     		movs	r1, #0
 760 001c 2046     		mov	r0, r4
 761 001e FFF7FEFF 		bl	memset
 762              	.LVL74:
 168:App/Src/control.c ****         for (i = 0; i < g_cmdNumber; i++) {
 763              		.loc 1 168 38 discriminator 3 view .LVU192
 168:App/Src/control.c ****         for (i = 0; i < g_cmdNumber; i++) {
 764              		.loc 1 168 39 is_stmt 0 discriminator 3 view .LVU193
 765 0022 0135     		adds	r5, r5, #1
 766              	.LVL75:
 767              	.L52:
 168:App/Src/control.c ****         for (i = 0; i < g_cmdNumber; i++) {
 768              		.loc 1 168 21 is_stmt 1 discriminator 1 view .LVU194
 168:App/Src/control.c ****         for (i = 0; i < g_cmdNumber; i++) {
 769              		.loc 1 168 23 is_stmt 0 discriminator 1 view .LVU195
 770 0024 054B     		ldr	r3, .L57+4
 771 0026 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 168:App/Src/control.c ****         for (i = 0; i < g_cmdNumber; i++) {
 772              		.loc 1 168 9 discriminator 1 view .LVU196
 773 0028 AB42     		cmp	r3, r5
 774 002a EEDC     		bgt	.L54
 172:App/Src/control.c ****     }
 775              		.loc 1 172 9 is_stmt 1 view .LVU197
 172:App/Src/control.c ****     }
ARM GAS  C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s 			page 19


 776              		.loc 1 172 21 is_stmt 0 view .LVU198
 777 002c 034B     		ldr	r3, .L57+4
 778 002e 0022     		movs	r2, #0
 779 0030 1A70     		strb	r2, [r3]
 780              		.loc 1 174 1 view .LVU199
 781 0032 E9E7     		b	.L51
 782              	.LVL76:
 783              	.L55:
 168:App/Src/control.c ****             get_one_message(g_commandList[i]);
 784              		.loc 1 168 16 view .LVU200
 785 0034 0025     		movs	r5, #0
 786 0036 F5E7     		b	.L52
 787              	.L58:
 788              		.align	2
 789              	.L57:
 790 0038 00000000 		.word	.LANCHOR6
 791 003c 00000000 		.word	.LANCHOR5
 792              		.cfi_endproc
 793              	.LFE244:
 795              		.global	g_commandList
 796              		.global	g_lastRead
 797              		.global	g_cmdNumber
 798              		.global	g_controlTxBuff
 799              		.global	g_controlRxBuff
 800              		.section	.bss.controlRxBuf,"aw",%nobits
 801              		.set	.LANCHOR1,. + 0
 804              	controlRxBuf:
 805 0000 00       		.space	1
 806              		.section	.bss.g_cmdNumber,"aw",%nobits
 807              		.set	.LANCHOR5,. + 0
 810              	g_cmdNumber:
 811 0000 00       		.space	1
 812              		.section	.bss.g_commandList,"aw",%nobits
 813              		.align	2
 814              		.set	.LANCHOR6,. + 0
 817              	g_commandList:
 818 0000 00000000 		.space	1000
 818      00000000 
 818      00000000 
 818      00000000 
 818      00000000 
 819              		.section	.bss.g_controlRxBuff,"aw",%nobits
 820              		.align	2
 821              		.set	.LANCHOR2,. + 0
 824              	g_controlRxBuff:
 825 0000 00000000 		.space	1000
 825      00000000 
 825      00000000 
 825      00000000 
 825      00000000 
 826              		.section	.bss.g_controlTxBuff,"aw",%nobits
 827              		.align	2
 828              		.set	.LANCHOR0,. + 0
 831              	g_controlTxBuff:
 832 0000 00000000 		.space	300
 832      00000000 
 832      00000000 
ARM GAS  C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s 			page 20


 832      00000000 
 832      00000000 
 833              		.section	.bss.g_lastRead,"aw",%nobits
 834              		.align	1
 835              		.set	.LANCHOR4,. + 0
 838              	g_lastRead:
 839 0000 0000     		.space	2
 840              		.section	.bss.g_rxCount,"aw",%nobits
 841              		.align	1
 842              		.set	.LANCHOR3,. + 0
 845              	g_rxCount:
 846 0000 0000     		.space	2
 847              		.text
 848              	.Letext0:
 849              		.file 2 "e:\\stm32-gcc\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\machine\\_default_
 850              		.file 3 "e:\\stm32-gcc\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\sys\\_stdint.h"
 851              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 852              		.file 5 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 853              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 854              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_uart.h"
 855              		.file 8 "e:\\stm32-gcc\\gcc-arm-none-eabi-10.3-2021.10\\lib\\gcc\\arm-none-eabi\\10.3.1\\include\\
 856              		.file 9 "e:\\stm32-gcc\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\stdio.h"
 857              		.file 10 "Device/Inc/lcd_driver.h"
 858              		.file 11 "Device/Inc/user_tool.h"
 859              		.file 12 "App/Inc/devices.h"
 860              		.file 13 "e:\\stm32-gcc\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\string.h"
 861              		.file 14 "<built-in>"
ARM GAS  C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s 			page 21


DEFINED SYMBOLS
                            *ABS*:00000000 control.c
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:20     .text.ControlPrintf:00000000 $t
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:26     .text.ControlPrintf:00000000 ControlPrintf
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:110    .text.ControlPrintf:00000048 $d
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:116    .rodata.control_usart_init.str1.4:00000000 $d
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:120    .text.control_usart_init:00000000 $t
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:126    .text.control_usart_init:00000000 control_usart_init
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:168    .text.control_usart_init:00000034 $d
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:177    .text.lcd_find_command:00000000 $t
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:183    .text.lcd_find_command:00000000 lcd_find_command
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:353    .text.lcd_find_command:0000008c $d
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:362    .text.handle_one_message:00000000 $t
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:368    .text.handle_one_message:00000000 handle_one_message
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:465    .text.handle_one_message:0000004c $d
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:471    .text.get_one_message:00000000 $t
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:477    .text.get_one_message:00000000 get_one_message
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:662    .text.control_usart_receive:00000000 $t
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:668    .text.control_usart_receive:00000000 control_usart_receive
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:709    .text.control_usart_receive:00000028 $d
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:717    .text.CheckControlList:00000000 $t
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:723    .text.CheckControlList:00000000 CheckControlList
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:790    .text.CheckControlList:00000038 $d
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:817    .bss.g_commandList:00000000 g_commandList
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:838    .bss.g_lastRead:00000000 g_lastRead
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:810    .bss.g_cmdNumber:00000000 g_cmdNumber
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:831    .bss.g_controlTxBuff:00000000 g_controlTxBuff
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:824    .bss.g_controlRxBuff:00000000 g_controlRxBuff
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:804    .bss.controlRxBuf:00000000 controlRxBuf
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:805    .bss.controlRxBuf:00000000 $d
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:811    .bss.g_cmdNumber:00000000 $d
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:813    .bss.g_commandList:00000000 $d
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:820    .bss.g_controlRxBuff:00000000 $d
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:827    .bss.g_controlTxBuff:00000000 $d
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:834    .bss.g_lastRead:00000000 $d
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:841    .bss.g_rxCount:00000000 $d
C:\Users\86158\AppData\Local\Temp\cc6cb8Tt.s:845    .bss.g_rxCount:00000000 g_rxCount

UNDEFINED SYMBOLS
memset
vsnprintf
strlen
HAL_UART_Transmit
huart2
HAL_UART_Receive_IT
SetScreen
CharToInt
show_chip_id
set_chipid_devices
g_inputNumber
g_screenId
