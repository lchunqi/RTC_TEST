ARM GAS  C:\Users\86158\AppData\Local\Temp\ccHkOXur.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"soft_uart.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.devices_printf,"ax",%progbits
  20              		.align	1
  21              		.global	devices_printf
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	devices_printf:
  27              	.LVL0:
  28              	.LFB238:
  29              		.file 1 "Drivers/User_Driver/Src/soft_uart.c"
   1:Drivers/User_Driver/Src/soft_uart.c **** #include "soft_uart.h"
   2:Drivers/User_Driver/Src/soft_uart.c **** #include "soft_uart.h"
   3:Drivers/User_Driver/Src/soft_uart.c **** #include <string.h>
   4:Drivers/User_Driver/Src/soft_uart.c **** #include <stdio.h>
   5:Drivers/User_Driver/Src/soft_uart.c **** #include <stdarg.h>
   6:Drivers/User_Driver/Src/soft_uart.c **** 
   7:Drivers/User_Driver/Src/soft_uart.c **** #define DEVICE1_IO_RX       GPIO_PIN_6
   8:Drivers/User_Driver/Src/soft_uart.c **** #define DEVICE1_IO_TX       GPIO_PIN_6
   9:Drivers/User_Driver/Src/soft_uart.c **** #define DEVICE1_TX_H        DEVICE1_IO_TX        
  10:Drivers/User_Driver/Src/soft_uart.c **** #define DEVICE1_TX_L        (uint32_t)DEVICE1_IO_TX << 16U  
  11:Drivers/User_Driver/Src/soft_uart.c **** 
  12:Drivers/User_Driver/Src/soft_uart.c **** 
  13:Drivers/User_Driver/Src/soft_uart.c **** typedef struct {
  14:Drivers/User_Driver/Src/soft_uart.c **** 	GPIO_TypeDef* busTx;
  15:Drivers/User_Driver/Src/soft_uart.c **** 	uint16_t pinTx;
  16:Drivers/User_Driver/Src/soft_uart.c **** 	GPIO_TypeDef* busRx;
  17:Drivers/User_Driver/Src/soft_uart.c **** 	uint16_t pinRx;
  18:Drivers/User_Driver/Src/soft_uart.c **** } SoftUartGpio;
  19:Drivers/User_Driver/Src/soft_uart.c **** SoftUartGpio g_uart[2] = {{GPIOA, GPIO_PIN_2, GPIOA, GPIO_PIN_3}, {GPIOB, GPIO_PIN_10, GPIOB, GPIO_
  20:Drivers/User_Driver/Src/soft_uart.c **** 
  21:Drivers/User_Driver/Src/soft_uart.c **** #define UART_DATA_LENGTH    9//8bit data, 1bit stop, none parity
  22:Drivers/User_Driver/Src/soft_uart.c **** typedef struct {
  23:Drivers/User_Driver/Src/soft_uart.c ****     uint8_t rxState;
  24:Drivers/User_Driver/Src/soft_uart.c ****     uint8_t rxCount;
  25:Drivers/User_Driver/Src/soft_uart.c ****     uint8_t rxBit;
  26:Drivers/User_Driver/Src/soft_uart.c ****     uint8_t rxData;
  27:Drivers/User_Driver/Src/soft_uart.c ****     uint8_t txState;
  28:Drivers/User_Driver/Src/soft_uart.c ****     uint8_t txCount;
  29:Drivers/User_Driver/Src/soft_uart.c ****     uint8_t txBit;
ARM GAS  C:\Users\86158\AppData\Local\Temp\ccHkOXur.s 			page 2


  30:Drivers/User_Driver/Src/soft_uart.c ****     uint8_t txData;
  31:Drivers/User_Driver/Src/soft_uart.c ****     uint8_t txBuff;
  32:Drivers/User_Driver/Src/soft_uart.c **** }UartSoftTimer;
  33:Drivers/User_Driver/Src/soft_uart.c **** 
  34:Drivers/User_Driver/Src/soft_uart.c **** SoftUart uart_dev[MAX_DEVICES_CHANNEL] = {0};
  35:Drivers/User_Driver/Src/soft_uart.c **** 
  36:Drivers/User_Driver/Src/soft_uart.c **** //---------------------------------------------------------------------------
  37:Drivers/User_Driver/Src/soft_uart.c **** #define CONTROL_RECEIVE_BUFF_NUMBER    200
  38:Drivers/User_Driver/Src/soft_uart.c **** extern uint16_t control_Rx_Cnt;		//
  39:Drivers/User_Driver/Src/soft_uart.c **** extern uint8_t g_controlRxBuff[CONTROL_RECEIVE_BUFF_NUMBER];
  40:Drivers/User_Driver/Src/soft_uart.c **** extern uint8_t g_controlATStatus;
  41:Drivers/User_Driver/Src/soft_uart.c **** 
  42:Drivers/User_Driver/Src/soft_uart.c **** #define UART_RECEIVE_BUFF_NUMBER    200
  43:Drivers/User_Driver/Src/soft_uart.c **** extern uint16_t device_Rx_Cnt;		//
  44:Drivers/User_Driver/Src/soft_uart.c **** extern uint8_t g_DeviceRxBuff[UART_RECEIVE_BUFF_NUMBER];
  45:Drivers/User_Driver/Src/soft_uart.c **** extern uint8_t g_DeviceATStatus;
  46:Drivers/User_Driver/Src/soft_uart.c **** //---------------------------------------------------------------------------
  47:Drivers/User_Driver/Src/soft_uart.c **** 
  48:Drivers/User_Driver/Src/soft_uart.c **** 
  49:Drivers/User_Driver/Src/soft_uart.c **** 
  50:Drivers/User_Driver/Src/soft_uart.c **** void devices_printf(SoftUart* soft_uart, char* fmt,...)  
  51:Drivers/User_Driver/Src/soft_uart.c **** {  
  30              		.loc 1 51 1 view -0
  31              		.cfi_startproc
  32              		@ args = 4, pretend = 12, frame = 72
  33              		@ frame_needed = 0, uses_anonymous_args = 1
  34              		.loc 1 51 1 is_stmt 0 view .LVU1
  35 0000 0EB4     		push	{r1, r2, r3}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 12
  38              		.cfi_offset 1, -12
  39              		.cfi_offset 2, -8
  40              		.cfi_offset 3, -4
  41 0002 F0B5     		push	{r4, r5, r6, r7, lr}
  42              	.LCFI1:
  43              		.cfi_def_cfa_offset 32
  44              		.cfi_offset 4, -32
  45              		.cfi_offset 5, -28
  46              		.cfi_offset 6, -24
  47              		.cfi_offset 7, -20
  48              		.cfi_offset 14, -16
  49 0004 92B0     		sub	sp, sp, #72
  50              	.LCFI2:
  51              		.cfi_def_cfa_offset 104
  52 0006 0546     		mov	r5, r0
  53 0008 17AE     		add	r6, sp, #92
  54 000a 56F8047B 		ldr	r7, [r6], #4
  52:Drivers/User_Driver/Src/soft_uart.c ****     uint8_t quick_buffer[SOFT_UART_TRANSMIT_SHORT] = {0};
  55              		.loc 1 52 5 is_stmt 1 view .LVU2
  56              		.loc 1 52 13 is_stmt 0 view .LVU3
  57 000e 0024     		movs	r4, #0
  58 0010 0294     		str	r4, [sp, #8]
  59 0012 3C22     		movs	r2, #60
  60 0014 2146     		mov	r1, r4
  61 0016 03A8     		add	r0, sp, #12
  62 0018 FFF7FEFF 		bl	memset
  63              	.LVL1:
ARM GAS  C:\Users\86158\AppData\Local\Temp\ccHkOXur.s 			page 3


  53:Drivers/User_Driver/Src/soft_uart.c ****     int i;
  64              		.loc 1 53 5 is_stmt 1 view .LVU4
  54:Drivers/User_Driver/Src/soft_uart.c ****     uint8_t length;
  65              		.loc 1 54 5 view .LVU5
  55:Drivers/User_Driver/Src/soft_uart.c **** 	va_list ap;//
  66              		.loc 1 55 2 view .LVU6
  56:Drivers/User_Driver/Src/soft_uart.c ****     
  57:Drivers/User_Driver/Src/soft_uart.c **** 	va_start(ap, fmt);//
  67              		.loc 1 57 2 view .LVU7
  68 001c 0196     		str	r6, [sp, #4]
  58:Drivers/User_Driver/Src/soft_uart.c **** 	vsnprintf((char*)quick_buffer, SOFT_UART_TRANSMIT_SHORT, fmt, ap);//
  69              		.loc 1 58 2 view .LVU8
  70 001e 3346     		mov	r3, r6
  71 0020 3A46     		mov	r2, r7
  72 0022 4021     		movs	r1, #64
  73 0024 02A8     		add	r0, sp, #8
  74 0026 FFF7FEFF 		bl	vsnprintf
  75              	.LVL2:
  59:Drivers/User_Driver/Src/soft_uart.c **** 	va_end(ap);
  76              		.loc 1 59 2 view .LVU9
  60:Drivers/User_Driver/Src/soft_uart.c ****     length = strlen((char*)quick_buffer);
  77              		.loc 1 60 5 view .LVU10
  78              		.loc 1 60 14 is_stmt 0 view .LVU11
  79 002a 02A8     		add	r0, sp, #8
  80 002c FFF7FEFF 		bl	strlen
  81              	.LVL3:
  61:Drivers/User_Driver/Src/soft_uart.c ****     for (i = 0; i < length; i++) {
  82              		.loc 1 61 5 is_stmt 1 view .LVU12
  83              		.loc 1 61 12 is_stmt 0 view .LVU13
  84 0030 2146     		mov	r1, r4
  85              		.loc 1 61 5 view .LVU14
  86 0032 00E0     		b	.L2
  87              	.LVL4:
  88              	.L3:
  89              		.loc 1 61 29 is_stmt 1 discriminator 2 view .LVU15
  90              		.loc 1 61 30 is_stmt 0 discriminator 2 view .LVU16
  91 0034 0131     		adds	r1, r1, #1
  92              	.LVL5:
  93              	.L2:
  94              		.loc 1 61 17 is_stmt 1 discriminator 1 view .LVU17
  95              		.loc 1 61 5 is_stmt 0 discriminator 1 view .LVU18
  96 0036 8842     		cmp	r0, r1
  97 0038 10DD     		ble	.L6
  62:Drivers/User_Driver/Src/soft_uart.c ****         soft_uart->tx_buffer[soft_uart->tx_write] = quick_buffer[i];	//装发送缓冲
  98              		.loc 1 62 9 is_stmt 1 view .LVU19
  99              		.loc 1 62 39 is_stmt 0 view .LVU20
 100 003a 6B88     		ldrh	r3, [r5, #2]
 101              		.loc 1 62 65 view .LVU21
 102 003c 01F14802 		add	r2, r1, #72
 103 0040 6A44     		add	r2, sp, r2
 104 0042 12F8404C 		ldrb	r4, [r2, #-64]	@ zero_extendqisi2
 105              		.loc 1 62 51 view .LVU22
 106 0046 EA18     		adds	r2, r5, r3
 107 0048 D471     		strb	r4, [r2, #7]
  63:Drivers/User_Driver/Src/soft_uart.c ****         if (++(soft_uart->tx_write) >= SOFT_UART_TRANSMIT_LONG) {
 108              		.loc 1 63 9 is_stmt 1 view .LVU23
 109              		.loc 1 63 13 is_stmt 0 view .LVU24
ARM GAS  C:\Users\86158\AppData\Local\Temp\ccHkOXur.s 			page 4


 110 004a 0133     		adds	r3, r3, #1
 111 004c 9BB2     		uxth	r3, r3
 112              		.loc 1 63 12 view .LVU25
 113 004e 6B80     		strh	r3, [r5, #2]	@ movhi
 114 0050 B3F5967F 		cmp	r3, #300
 115 0054 EED3     		bcc	.L3
  64:Drivers/User_Driver/Src/soft_uart.c ****             soft_uart->tx_write = 0;
 116              		.loc 1 64 13 is_stmt 1 view .LVU26
 117              		.loc 1 64 33 is_stmt 0 view .LVU27
 118 0056 0023     		movs	r3, #0
 119 0058 6B80     		strh	r3, [r5, #2]	@ movhi
 120 005a EBE7     		b	.L3
 121              	.L6:
  65:Drivers/User_Driver/Src/soft_uart.c ****         }	
  66:Drivers/User_Driver/Src/soft_uart.c ****     }
  67:Drivers/User_Driver/Src/soft_uart.c **** }
 122              		.loc 1 67 1 view .LVU28
 123 005c 12B0     		add	sp, sp, #72
 124              	.LCFI3:
 125              		.cfi_def_cfa_offset 32
 126              		@ sp needed
 127 005e BDE8F040 		pop	{r4, r5, r6, r7, lr}
 128              	.LCFI4:
 129              		.cfi_restore 14
 130              		.cfi_restore 7
 131              		.cfi_restore 6
 132              		.cfi_restore 5
 133              		.cfi_restore 4
 134              		.cfi_def_cfa_offset 12
 135              	.LVL6:
 136              		.loc 1 67 1 view .LVU29
 137 0062 03B0     		add	sp, sp, #12
 138              	.LCFI5:
 139              		.cfi_restore 3
 140              		.cfi_restore 2
 141              		.cfi_restore 1
 142              		.cfi_def_cfa_offset 0
 143 0064 7047     		bx	lr
 144              		.cfi_endproc
 145              	.LFE238:
 147              		.section	.text.devices_receive_byte,"ax",%progbits
 148              		.align	1
 149              		.global	devices_receive_byte
 150              		.syntax unified
 151              		.thumb
 152              		.thumb_func
 154              	devices_receive_byte:
 155              	.LVL7:
 156              	.LFB239:
  68:Drivers/User_Driver/Src/soft_uart.c **** 
  69:Drivers/User_Driver/Src/soft_uart.c **** void devices_receive_byte(uint8_t channel, uint8_t rxBuff)
  70:Drivers/User_Driver/Src/soft_uart.c **** {
 157              		.loc 1 70 1 is_stmt 1 view -0
 158              		.cfi_startproc
 159              		@ args = 0, pretend = 0, frame = 0
 160              		@ frame_needed = 0, uses_anonymous_args = 0
 161              		@ link register save eliminated.
ARM GAS  C:\Users\86158\AppData\Local\Temp\ccHkOXur.s 			page 5


  71:Drivers/User_Driver/Src/soft_uart.c ****     if (channel == 1) {
 162              		.loc 1 71 5 view .LVU31
 163              		.loc 1 71 8 is_stmt 0 view .LVU32
 164 0000 0128     		cmp	r0, #1
 165 0002 15D0     		beq	.L14
  72:Drivers/User_Driver/Src/soft_uart.c ****         if (control_Rx_Cnt < CONTROL_RECEIVE_BUFF_NUMBER && g_controlATStatus == 0) {
  73:Drivers/User_Driver/Src/soft_uart.c ****             g_controlRxBuff[control_Rx_Cnt] = rxBuff;
  74:Drivers/User_Driver/Src/soft_uart.c ****             control_Rx_Cnt++;
  75:Drivers/User_Driver/Src/soft_uart.c ****         }
  76:Drivers/User_Driver/Src/soft_uart.c ****         if (control_Rx_Cnt >= CONTROL_RECEIVE_BUFF_NUMBER || rxBuff == '\n') {
  77:Drivers/User_Driver/Src/soft_uart.c ****             g_controlATStatus = 1;
  78:Drivers/User_Driver/Src/soft_uart.c ****         }
  79:Drivers/User_Driver/Src/soft_uart.c ****     } else {
  80:Drivers/User_Driver/Src/soft_uart.c ****         if (device_Rx_Cnt < UART_RECEIVE_BUFF_NUMBER && g_DeviceATStatus == 0) {
 166              		.loc 1 80 9 is_stmt 1 view .LVU33
 167              		.loc 1 80 27 is_stmt 0 view .LVU34
 168 0004 154B     		ldr	r3, .L15
 169 0006 1B88     		ldrh	r3, [r3]
 170              		.loc 1 80 12 view .LVU35
 171 0008 C72B     		cmp	r3, #199
 172 000a 07D8     		bhi	.L12
 173              		.loc 1 80 74 discriminator 1 view .LVU36
 174 000c 144A     		ldr	r2, .L15+4
 175 000e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 176              		.loc 1 80 54 discriminator 1 view .LVU37
 177 0010 22B9     		cbnz	r2, .L12
  81:Drivers/User_Driver/Src/soft_uart.c ****             g_DeviceRxBuff[device_Rx_Cnt] = rxBuff;
 178              		.loc 1 81 13 is_stmt 1 view .LVU38
 179              		.loc 1 81 43 is_stmt 0 view .LVU39
 180 0012 144A     		ldr	r2, .L15+8
 181 0014 D154     		strb	r1, [r2, r3]
  82:Drivers/User_Driver/Src/soft_uart.c ****         	device_Rx_Cnt++;
 182              		.loc 1 82 10 is_stmt 1 view .LVU40
 183              		.loc 1 82 23 is_stmt 0 view .LVU41
 184 0016 0133     		adds	r3, r3, #1
 185 0018 104A     		ldr	r2, .L15
 186 001a 1380     		strh	r3, [r2]	@ movhi
 187              	.L12:
  83:Drivers/User_Driver/Src/soft_uart.c ****         }
  84:Drivers/User_Driver/Src/soft_uart.c ****         if (device_Rx_Cnt >= UART_RECEIVE_BUFF_NUMBER || rxBuff == '\n') {
 188              		.loc 1 84 9 is_stmt 1 view .LVU42
 189              		.loc 1 84 27 is_stmt 0 view .LVU43
 190 001c 0F4B     		ldr	r3, .L15
 191 001e 1B88     		ldrh	r3, [r3]
 192              		.loc 1 84 12 view .LVU44
 193 0020 C72B     		cmp	r3, #199
 194 0022 01D8     		bhi	.L13
 195              		.loc 1 84 55 discriminator 1 view .LVU45
 196 0024 0A29     		cmp	r1, #10
 197 0026 02D1     		bne	.L7
 198              	.L13:
  85:Drivers/User_Driver/Src/soft_uart.c ****             g_DeviceATStatus = 1;
 199              		.loc 1 85 13 is_stmt 1 view .LVU46
 200              		.loc 1 85 30 is_stmt 0 view .LVU47
 201 0028 0D4B     		ldr	r3, .L15+4
 202 002a 0122     		movs	r2, #1
 203 002c 1A70     		strb	r2, [r3]
ARM GAS  C:\Users\86158\AppData\Local\Temp\ccHkOXur.s 			page 6


 204              	.L7:
  86:Drivers/User_Driver/Src/soft_uart.c ****         }
  87:Drivers/User_Driver/Src/soft_uart.c ****     }
  88:Drivers/User_Driver/Src/soft_uart.c **** }
 205              		.loc 1 88 1 view .LVU48
 206 002e 7047     		bx	lr
 207              	.L14:
  72:Drivers/User_Driver/Src/soft_uart.c ****             g_controlRxBuff[control_Rx_Cnt] = rxBuff;
 208              		.loc 1 72 9 is_stmt 1 view .LVU49
  72:Drivers/User_Driver/Src/soft_uart.c ****             g_controlRxBuff[control_Rx_Cnt] = rxBuff;
 209              		.loc 1 72 28 is_stmt 0 view .LVU50
 210 0030 0D4B     		ldr	r3, .L15+12
 211 0032 1B88     		ldrh	r3, [r3]
  72:Drivers/User_Driver/Src/soft_uart.c ****             g_controlRxBuff[control_Rx_Cnt] = rxBuff;
 212              		.loc 1 72 12 view .LVU51
 213 0034 C72B     		cmp	r3, #199
 214 0036 07D8     		bhi	.L9
  72:Drivers/User_Driver/Src/soft_uart.c ****             g_controlRxBuff[control_Rx_Cnt] = rxBuff;
 215              		.loc 1 72 79 discriminator 1 view .LVU52
 216 0038 0C4A     		ldr	r2, .L15+16
 217 003a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
  72:Drivers/User_Driver/Src/soft_uart.c ****             g_controlRxBuff[control_Rx_Cnt] = rxBuff;
 218              		.loc 1 72 58 discriminator 1 view .LVU53
 219 003c 22B9     		cbnz	r2, .L9
  73:Drivers/User_Driver/Src/soft_uart.c ****             control_Rx_Cnt++;
 220              		.loc 1 73 13 is_stmt 1 view .LVU54
  73:Drivers/User_Driver/Src/soft_uart.c ****             control_Rx_Cnt++;
 221              		.loc 1 73 45 is_stmt 0 view .LVU55
 222 003e 0C4A     		ldr	r2, .L15+20
 223 0040 D154     		strb	r1, [r2, r3]
  74:Drivers/User_Driver/Src/soft_uart.c ****         }
 224              		.loc 1 74 13 is_stmt 1 view .LVU56
  74:Drivers/User_Driver/Src/soft_uart.c ****         }
 225              		.loc 1 74 27 is_stmt 0 view .LVU57
 226 0042 0133     		adds	r3, r3, #1
 227 0044 084A     		ldr	r2, .L15+12
 228 0046 1380     		strh	r3, [r2]	@ movhi
 229              	.L9:
  76:Drivers/User_Driver/Src/soft_uart.c ****             g_controlATStatus = 1;
 230              		.loc 1 76 9 is_stmt 1 view .LVU58
  76:Drivers/User_Driver/Src/soft_uart.c ****             g_controlATStatus = 1;
 231              		.loc 1 76 28 is_stmt 0 view .LVU59
 232 0048 074B     		ldr	r3, .L15+12
 233 004a 1B88     		ldrh	r3, [r3]
  76:Drivers/User_Driver/Src/soft_uart.c ****             g_controlATStatus = 1;
 234              		.loc 1 76 12 view .LVU60
 235 004c C72B     		cmp	r3, #199
 236 004e 01D8     		bhi	.L10
  76:Drivers/User_Driver/Src/soft_uart.c ****             g_controlATStatus = 1;
 237              		.loc 1 76 59 discriminator 1 view .LVU61
 238 0050 0A29     		cmp	r1, #10
 239 0052 ECD1     		bne	.L7
 240              	.L10:
  77:Drivers/User_Driver/Src/soft_uart.c ****         }
 241              		.loc 1 77 13 is_stmt 1 view .LVU62
  77:Drivers/User_Driver/Src/soft_uart.c ****         }
 242              		.loc 1 77 31 is_stmt 0 view .LVU63
ARM GAS  C:\Users\86158\AppData\Local\Temp\ccHkOXur.s 			page 7


 243 0054 054B     		ldr	r3, .L15+16
 244 0056 0122     		movs	r2, #1
 245 0058 1A70     		strb	r2, [r3]
 246 005a 7047     		bx	lr
 247              	.L16:
 248              		.align	2
 249              	.L15:
 250 005c 00000000 		.word	device_Rx_Cnt
 251 0060 00000000 		.word	g_DeviceATStatus
 252 0064 00000000 		.word	g_DeviceRxBuff
 253 0068 00000000 		.word	control_Rx_Cnt
 254 006c 00000000 		.word	g_controlATStatus
 255 0070 00000000 		.word	g_controlRxBuff
 256              		.cfi_endproc
 257              	.LFE239:
 259              		.section	.text.uart_bus_time,"ax",%progbits
 260              		.align	1
 261              		.global	uart_bus_time
 262              		.syntax unified
 263              		.thumb
 264              		.thumb_func
 266              	uart_bus_time:
 267              	.LFB240:
  89:Drivers/User_Driver/Src/soft_uart.c **** 
  90:Drivers/User_Driver/Src/soft_uart.c **** 
  91:Drivers/User_Driver/Src/soft_uart.c **** void uart_bus_time(void)
  92:Drivers/User_Driver/Src/soft_uart.c **** {
 268              		.loc 1 92 1 is_stmt 1 view -0
 269              		.cfi_startproc
 270              		@ args = 0, pretend = 0, frame = 8
 271              		@ frame_needed = 0, uses_anonymous_args = 0
 272 0000 10B5     		push	{r4, lr}
 273              	.LCFI6:
 274              		.cfi_def_cfa_offset 8
 275              		.cfi_offset 4, -8
 276              		.cfi_offset 14, -4
 277 0002 82B0     		sub	sp, sp, #8
 278              	.LCFI7:
 279              		.cfi_def_cfa_offset 16
  93:Drivers/User_Driver/Src/soft_uart.c ****     int i;
 280              		.loc 1 93 5 view .LVU65
  94:Drivers/User_Driver/Src/soft_uart.c ****     static UartSoftTimer uartTimer[MAX_DEVICES_CHANNEL] = {0};
 281              		.loc 1 94 5 view .LVU66
  95:Drivers/User_Driver/Src/soft_uart.c ****     uint16_t input[MAX_DEVICES_CHANNEL] = {0};
 282              		.loc 1 95 5 view .LVU67
 283              		.loc 1 95 14 is_stmt 0 view .LVU68
 284 0004 0023     		movs	r3, #0
 285 0006 0193     		str	r3, [sp, #4]
  96:Drivers/User_Driver/Src/soft_uart.c ****     for (i = 0; i < MAX_DEVICES_CHANNEL; i++) {
 286              		.loc 1 96 5 is_stmt 1 view .LVU69
 287              	.LVL8:
 288              		.loc 1 96 5 is_stmt 0 view .LVU70
 289 0008 0CE0     		b	.L18
 290              	.LVL9:
 291              	.L19:
  97:Drivers/User_Driver/Src/soft_uart.c ****         input[i] = g_uart[i].busRx->IDR & g_uart[i].pinRx;
 292              		.loc 1 97 9 is_stmt 1 discriminator 3 view .LVU71
ARM GAS  C:\Users\86158\AppData\Local\Temp\ccHkOXur.s 			page 8


 293              		.loc 1 97 29 is_stmt 0 discriminator 3 view .LVU72
 294 000a 7B4A     		ldr	r2, .L38
 295 000c 02EB0312 		add	r2, r2, r3, lsl #4
 296 0010 9168     		ldr	r1, [r2, #8]
 297              		.loc 1 97 35 discriminator 3 view .LVU73
 298 0012 0969     		ldr	r1, [r1, #16]
 299              		.loc 1 97 52 discriminator 3 view .LVU74
 300 0014 9289     		ldrh	r2, [r2, #12]
 301              		.loc 1 97 41 discriminator 3 view .LVU75
 302 0016 0A40     		ands	r2, r2, r1
 303              		.loc 1 97 18 discriminator 3 view .LVU76
 304 0018 02A9     		add	r1, sp, #8
 305 001a 01EB4301 		add	r1, r1, r3, lsl #1
 306 001e 21F8042C 		strh	r2, [r1, #-4]	@ movhi
  96:Drivers/User_Driver/Src/soft_uart.c ****     for (i = 0; i < MAX_DEVICES_CHANNEL; i++) {
 307              		.loc 1 96 42 is_stmt 1 discriminator 3 view .LVU77
  96:Drivers/User_Driver/Src/soft_uart.c ****     for (i = 0; i < MAX_DEVICES_CHANNEL; i++) {
 308              		.loc 1 96 43 is_stmt 0 discriminator 3 view .LVU78
 309 0022 0133     		adds	r3, r3, #1
 310              	.LVL10:
 311              	.L18:
  96:Drivers/User_Driver/Src/soft_uart.c ****     for (i = 0; i < MAX_DEVICES_CHANNEL; i++) {
 312              		.loc 1 96 17 is_stmt 1 discriminator 1 view .LVU79
  96:Drivers/User_Driver/Src/soft_uart.c ****     for (i = 0; i < MAX_DEVICES_CHANNEL; i++) {
 313              		.loc 1 96 5 is_stmt 0 discriminator 1 view .LVU80
 314 0024 012B     		cmp	r3, #1
 315 0026 F0DD     		ble	.L19
  98:Drivers/User_Driver/Src/soft_uart.c ****     }
  99:Drivers/User_Driver/Src/soft_uart.c ****     for (i = 0; i < MAX_DEVICES_CHANNEL; i++) {
 316              		.loc 1 99 12 view .LVU81
 317 0028 0024     		movs	r4, #0
 318 002a 1DE0     		b	.L20
 319              	.LVL11:
 320              	.L36:
 100:Drivers/User_Driver/Src/soft_uart.c ****         if (uartTimer[i].rxState) {
 101:Drivers/User_Driver/Src/soft_uart.c ****             if (--(uartTimer[i].rxCount) == 0) {			  //接收数据以定时器的1/3来接收
 102:Drivers/User_Driver/Src/soft_uart.c ****                 uartTimer[i].rxCount = MULTIPLE_OF_TIEMR;     //重置接收计数器  接收数据以定时器的1
 103:Drivers/User_Driver/Src/soft_uart.c ****                 if (--(uartTimer[i].rxBit) == 0) {			  //接收完一帧数据
 104:Drivers/User_Driver/Src/soft_uart.c ****                     uartTimer[i].rxState = 0;               //停止接收			
 321              		.loc 1 104 21 is_stmt 1 view .LVU82
 322              		.loc 1 104 42 is_stmt 0 view .LVU83
 323 002c 734A     		ldr	r2, .L38+4
 324 002e 04EBC403 		add	r3, r4, r4, lsl #3
 325 0032 D118     		adds	r1, r2, r3
 326 0034 0020     		movs	r0, #0
 327 0036 D054     		strb	r0, [r2, r3]
 105:Drivers/User_Driver/Src/soft_uart.c ****                     devices_receive_byte(i, uartTimer[i].rxData);
 328              		.loc 1 105 21 is_stmt 1 view .LVU84
 329 0038 C978     		ldrb	r1, [r1, #3]	@ zero_extendqisi2
 330 003a E0B2     		uxtb	r0, r4
 331 003c FFF7FEFF 		bl	devices_receive_byte
 332              	.LVL12:
 333 0040 11E0     		b	.L22
 334              	.L21:
 106:Drivers/User_Driver/Src/soft_uart.c ****                     // devices_receive_byte(&uart_dev[i], uartTimer[i].rxData);    //接收字符处理
 107:Drivers/User_Driver/Src/soft_uart.c ****                 } else {
 108:Drivers/User_Driver/Src/soft_uart.c ****                     uartTimer[i].rxData >>= 1;			  //把接收的单bit数据 暂存到 rxData(接收缓冲)
ARM GAS  C:\Users\86158\AppData\Local\Temp\ccHkOXur.s 			page 9


 109:Drivers/User_Driver/Src/soft_uart.c ****                     if (input[i]) {
 110:Drivers/User_Driver/Src/soft_uart.c ****                         uartTimer[i].rxData |= 0x80;  
 111:Drivers/User_Driver/Src/soft_uart.c ****                     }
 112:Drivers/User_Driver/Src/soft_uart.c ****                 }
 113:Drivers/User_Driver/Src/soft_uart.c ****             }
 114:Drivers/User_Driver/Src/soft_uart.c ****         } else if (input[i] == 0) {	//判断是不是开始位 RXB=0;
 335              		.loc 1 114 16 view .LVU85
 336              		.loc 1 114 25 is_stmt 0 view .LVU86
 337 0042 02AB     		add	r3, sp, #8
 338 0044 03EB4403 		add	r3, r3, r4, lsl #1
 339 0048 33F8043C 		ldrh	r3, [r3, #-4]
 340              		.loc 1 114 19 view .LVU87
 341 004c 5BB9     		cbnz	r3, .L22
 115:Drivers/User_Driver/Src/soft_uart.c ****             uartTimer[i].rxState = 1;       //如果是则设置开始接收标志位 	
 342              		.loc 1 115 13 is_stmt 1 view .LVU88
 343              		.loc 1 115 34 is_stmt 0 view .LVU89
 344 004e 6B49     		ldr	r1, .L38+4
 345 0050 04EBC402 		add	r2, r4, r4, lsl #3
 346 0054 8B18     		adds	r3, r1, r2
 347 0056 0120     		movs	r0, #1
 348 0058 8854     		strb	r0, [r1, r2]
 116:Drivers/User_Driver/Src/soft_uart.c ****             uartTimer[i].rxCount = MULTIPLE_OF_TIEMR + 1;  //错开1/3周期接收，很关键，增强容错能力 
 349              		.loc 1 116 13 is_stmt 1 view .LVU90
 350              		.loc 1 116 34 is_stmt 0 view .LVU91
 351 005a 0422     		movs	r2, #4
 352 005c 5A70     		strb	r2, [r3, #1]
 117:Drivers/User_Driver/Src/soft_uart.c ****             uartTimer[i].rxBit = UART_DATA_LENGTH;       //初始化接收的数据位数(8个数据位+1个停止位
 353              		.loc 1 117 13 is_stmt 1 view .LVU92
 354              		.loc 1 117 32 is_stmt 0 view .LVU93
 355 005e 0922     		movs	r2, #9
 356 0060 9A70     		strb	r2, [r3, #2]
 118:Drivers/User_Driver/Src/soft_uart.c ****             uartTimer[i].rxData = 0;
 357              		.loc 1 118 13 is_stmt 1 view .LVU94
 358              		.loc 1 118 33 is_stmt 0 view .LVU95
 359 0062 0022     		movs	r2, #0
 360 0064 DA70     		strb	r2, [r3, #3]
 361              	.L22:
  99:Drivers/User_Driver/Src/soft_uart.c ****         if (uartTimer[i].rxState) {
 362              		.loc 1 99 42 is_stmt 1 discriminator 2 view .LVU96
  99:Drivers/User_Driver/Src/soft_uart.c ****         if (uartTimer[i].rxState) {
 363              		.loc 1 99 43 is_stmt 0 discriminator 2 view .LVU97
 364 0066 0134     		adds	r4, r4, #1
 365              	.LVL13:
 366              	.L20:
  99:Drivers/User_Driver/Src/soft_uart.c ****         if (uartTimer[i].rxState) {
 367              		.loc 1 99 17 is_stmt 1 discriminator 1 view .LVU98
  99:Drivers/User_Driver/Src/soft_uart.c ****         if (uartTimer[i].rxState) {
 368              		.loc 1 99 5 is_stmt 0 discriminator 1 view .LVU99
 369 0068 012C     		cmp	r4, #1
 370 006a 30DC     		bgt	.L35
 100:Drivers/User_Driver/Src/soft_uart.c ****             if (--(uartTimer[i].rxCount) == 0) {			  //接收数据以定时器的1/3来接收
 371              		.loc 1 100 9 is_stmt 1 view .LVU100
 100:Drivers/User_Driver/Src/soft_uart.c ****             if (--(uartTimer[i].rxCount) == 0) {			  //接收数据以定时器的1/3来接收
 372              		.loc 1 100 25 is_stmt 0 view .LVU101
 373 006c 04EBC403 		add	r3, r4, r4, lsl #3
 374 0070 624A     		ldr	r2, .L38+4
 375 0072 D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
ARM GAS  C:\Users\86158\AppData\Local\Temp\ccHkOXur.s 			page 10


 100:Drivers/User_Driver/Src/soft_uart.c ****             if (--(uartTimer[i].rxCount) == 0) {			  //接收数据以定时器的1/3来接收
 376              		.loc 1 100 12 view .LVU102
 377 0074 002B     		cmp	r3, #0
 378 0076 E4D0     		beq	.L21
 101:Drivers/User_Driver/Src/soft_uart.c ****                 uartTimer[i].rxCount = MULTIPLE_OF_TIEMR;     //重置接收计数器  接收数据以定时器的1
 379              		.loc 1 101 13 is_stmt 1 view .LVU103
 101:Drivers/User_Driver/Src/soft_uart.c ****                 uartTimer[i].rxCount = MULTIPLE_OF_TIEMR;     //重置接收计数器  接收数据以定时器的1
 380              		.loc 1 101 32 is_stmt 0 view .LVU104
 381 0078 04EBC403 		add	r3, r4, r4, lsl #3
 382 007c 1A44     		add	r2, r2, r3
 383 007e 5378     		ldrb	r3, [r2, #1]	@ zero_extendqisi2
 101:Drivers/User_Driver/Src/soft_uart.c ****                 uartTimer[i].rxCount = MULTIPLE_OF_TIEMR;     //重置接收计数器  接收数据以定时器的1
 384              		.loc 1 101 17 view .LVU105
 385 0080 013B     		subs	r3, r3, #1
 386 0082 DBB2     		uxtb	r3, r3
 101:Drivers/User_Driver/Src/soft_uart.c ****                 uartTimer[i].rxCount = MULTIPLE_OF_TIEMR;     //重置接收计数器  接收数据以定时器的1
 387              		.loc 1 101 16 view .LVU106
 388 0084 5370     		strb	r3, [r2, #1]
 389 0086 002B     		cmp	r3, #0
 390 0088 EDD1     		bne	.L22
 102:Drivers/User_Driver/Src/soft_uart.c ****                 if (--(uartTimer[i].rxBit) == 0) {			  //接收完一帧数据
 391              		.loc 1 102 17 is_stmt 1 view .LVU107
 102:Drivers/User_Driver/Src/soft_uart.c ****                 if (--(uartTimer[i].rxBit) == 0) {			  //接收完一帧数据
 392              		.loc 1 102 38 is_stmt 0 view .LVU108
 393 008a 04EBC403 		add	r3, r4, r4, lsl #3
 394 008e 5B4A     		ldr	r2, .L38+4
 395 0090 1A44     		add	r2, r2, r3
 396 0092 0323     		movs	r3, #3
 397 0094 5370     		strb	r3, [r2, #1]
 103:Drivers/User_Driver/Src/soft_uart.c ****                     uartTimer[i].rxState = 0;               //停止接收			
 398              		.loc 1 103 17 is_stmt 1 view .LVU109
 103:Drivers/User_Driver/Src/soft_uart.c ****                     uartTimer[i].rxState = 0;               //停止接收			
 399              		.loc 1 103 36 is_stmt 0 view .LVU110
 400 0096 9378     		ldrb	r3, [r2, #2]	@ zero_extendqisi2
 103:Drivers/User_Driver/Src/soft_uart.c ****                     uartTimer[i].rxState = 0;               //停止接收			
 401              		.loc 1 103 21 view .LVU111
 402 0098 013B     		subs	r3, r3, #1
 403 009a DBB2     		uxtb	r3, r3
 103:Drivers/User_Driver/Src/soft_uart.c ****                     uartTimer[i].rxState = 0;               //停止接收			
 404              		.loc 1 103 20 view .LVU112
 405 009c 9370     		strb	r3, [r2, #2]
 406 009e 002B     		cmp	r3, #0
 407 00a0 C4D0     		beq	.L36
 108:Drivers/User_Driver/Src/soft_uart.c ****                     if (input[i]) {
 408              		.loc 1 108 21 is_stmt 1 view .LVU113
 108:Drivers/User_Driver/Src/soft_uart.c ****                     if (input[i]) {
 409              		.loc 1 108 41 is_stmt 0 view .LVU114
 410 00a2 04EBC403 		add	r3, r4, r4, lsl #3
 411 00a6 554A     		ldr	r2, .L38+4
 412 00a8 1A44     		add	r2, r2, r3
 413 00aa D378     		ldrb	r3, [r2, #3]	@ zero_extendqisi2
 414 00ac 5B08     		lsrs	r3, r3, #1
 415 00ae D370     		strb	r3, [r2, #3]
 109:Drivers/User_Driver/Src/soft_uart.c ****                         uartTimer[i].rxData |= 0x80;  
 416              		.loc 1 109 21 is_stmt 1 view .LVU115
 109:Drivers/User_Driver/Src/soft_uart.c ****                         uartTimer[i].rxData |= 0x80;  
 417              		.loc 1 109 30 is_stmt 0 view .LVU116
ARM GAS  C:\Users\86158\AppData\Local\Temp\ccHkOXur.s 			page 11


 418 00b0 02AA     		add	r2, sp, #8
 419 00b2 02EB4402 		add	r2, r2, r4, lsl #1
 420 00b6 32F8042C 		ldrh	r2, [r2, #-4]
 109:Drivers/User_Driver/Src/soft_uart.c ****                         uartTimer[i].rxData |= 0x80;  
 421              		.loc 1 109 24 view .LVU117
 422 00ba 002A     		cmp	r2, #0
 423 00bc D3D0     		beq	.L22
 110:Drivers/User_Driver/Src/soft_uart.c ****                     }
 424              		.loc 1 110 25 is_stmt 1 view .LVU118
 110:Drivers/User_Driver/Src/soft_uart.c ****                     }
 425              		.loc 1 110 45 is_stmt 0 view .LVU119
 426 00be 04EBC401 		add	r1, r4, r4, lsl #3
 427 00c2 4E4A     		ldr	r2, .L38+4
 428 00c4 0A44     		add	r2, r2, r1
 429 00c6 63F07F03 		orn	r3, r3, #127
 430 00ca D370     		strb	r3, [r2, #3]
 431 00cc CBE7     		b	.L22
 432              	.L35:
 119:Drivers/User_Driver/Src/soft_uart.c ****         }
 120:Drivers/User_Driver/Src/soft_uart.c ****     }
 121:Drivers/User_Driver/Src/soft_uart.c ****         //---------------------接收与发送分隔线-------------------------------------
 122:Drivers/User_Driver/Src/soft_uart.c ****     for (i = 0; i < MAX_DEVICES_CHANNEL; i++) {
 433              		.loc 1 122 12 view .LVU120
 434 00ce 0023     		movs	r3, #0
 435 00d0 16E0     		b	.L25
 436              	.LVL14:
 437              	.L29:
 123:Drivers/User_Driver/Src/soft_uart.c ****         if (uartTimer[i].txState == 0 && uart_dev[i].tx_read != uart_dev[i].tx_write)//循环队列
 124:Drivers/User_Driver/Src/soft_uart.c ****         {
 125:Drivers/User_Driver/Src/soft_uart.c ****             uartTimer[i].txBuff = uart_dev[i].tx_buffer[uart_dev[i].tx_read];
 126:Drivers/User_Driver/Src/soft_uart.c ****             if (++(uart_dev[i].tx_read) >= SOFT_UART_TRANSMIT_LONG)	{
 127:Drivers/User_Driver/Src/soft_uart.c ****                 uart_dev[i].tx_read = 0;
 128:Drivers/User_Driver/Src/soft_uart.c ****             }
 129:Drivers/User_Driver/Src/soft_uart.c ****             uartTimer[i].txState = 1;
 130:Drivers/User_Driver/Src/soft_uart.c ****         }
 131:Drivers/User_Driver/Src/soft_uart.c ****         if (uartTimer[i].txState != 0)	{		        //发送开始标志位 
 132:Drivers/User_Driver/Src/soft_uart.c ****             if (--(uartTimer[i].txCount) <= 0) {			//发送数据以定时器的1/3来发送
 133:Drivers/User_Driver/Src/soft_uart.c ****                 uartTimer[i].txCount = MULTIPLE_OF_TIEMR;				//重置发送计数器 
 134:Drivers/User_Driver/Src/soft_uart.c ****                 if (uartTimer[i].txBit == 0) {		    //发送计数器为0 表明单字节发送还没开始
 135:Drivers/User_Driver/Src/soft_uart.c ****                     g_uart[i].busTx->BSRR = ((uint32_t)g_uart[i].pinTx << 16U);	//发送开始位     		
 136:Drivers/User_Driver/Src/soft_uart.c ****                     uartTimer[i].txData = uartTimer[i].txBuff;		//把缓冲的数据放到发送的buff		
 137:Drivers/User_Driver/Src/soft_uart.c ****                     uartTimer[i].txBit = UART_DATA_LENGTH;	//发送数据位数 (8数据位+1停止位)	
 138:Drivers/User_Driver/Src/soft_uart.c ****                 } else	{				                //发送计数器为非0 正在发送数据
 139:Drivers/User_Driver/Src/soft_uart.c ****                     if (--(uartTimer[i].txBit) == 0) {    //发送计数器减为0 表明单字节发送结束
 438              		.loc 1 139 21 is_stmt 1 view .LVU121
 439              		.loc 1 139 25 is_stmt 0 view .LVU122
 440 00d2 013A     		subs	r2, r2, #1
 441 00d4 D2B2     		uxtb	r2, r2
 442              		.loc 1 139 24 view .LVU123
 443 00d6 03EBC300 		add	r0, r3, r3, lsl #3
 444 00da 4849     		ldr	r1, .L38+4
 445 00dc 0144     		add	r1, r1, r0
 446 00de 8A71     		strb	r2, [r1, #6]
 447 00e0 002A     		cmp	r2, #0
 448 00e2 67D1     		bne	.L30
 140:Drivers/User_Driver/Src/soft_uart.c ****                         g_uart[i].busTx->BSRR = g_uart[i].pinTx;		//送停止位数据
 449              		.loc 1 140 25 is_stmt 1 view .LVU124
ARM GAS  C:\Users\86158\AppData\Local\Temp\ccHkOXur.s 			page 12


 450              		.loc 1 140 34 is_stmt 0 view .LVU125
 451 00e4 4449     		ldr	r1, .L38
 452 00e6 1A01     		lsls	r2, r3, #4
 453 00e8 01EB0310 		add	r0, r1, r3, lsl #4
 454 00ec 8A58     		ldr	r2, [r1, r2]
 455              		.loc 1 140 58 view .LVU126
 456 00ee 8188     		ldrh	r1, [r0, #4]
 457              		.loc 1 140 47 view .LVU127
 458 00f0 9161     		str	r1, [r2, #24]
 141:Drivers/User_Driver/Src/soft_uart.c ****                         uartTimer[i].txState = 0;		//发送停止位
 459              		.loc 1 141 25 is_stmt 1 view .LVU128
 460              		.loc 1 141 46 is_stmt 0 view .LVU129
 461 00f2 03EBC301 		add	r1, r3, r3, lsl #3
 462 00f6 414A     		ldr	r2, .L38+4
 463 00f8 0A44     		add	r2, r2, r1
 464 00fa 0021     		movs	r1, #0
 465 00fc 1171     		strb	r1, [r2, #4]
 466              	.L28:
 122:Drivers/User_Driver/Src/soft_uart.c ****         if (uartTimer[i].txState == 0 && uart_dev[i].tx_read != uart_dev[i].tx_write)//循环队列
 467              		.loc 1 122 42 is_stmt 1 discriminator 2 view .LVU130
 122:Drivers/User_Driver/Src/soft_uart.c ****         if (uartTimer[i].txState == 0 && uart_dev[i].tx_read != uart_dev[i].tx_write)//循环队列
 468              		.loc 1 122 43 is_stmt 0 discriminator 2 view .LVU131
 469 00fe 0133     		adds	r3, r3, #1
 470              	.LVL15:
 471              	.L25:
 122:Drivers/User_Driver/Src/soft_uart.c ****         if (uartTimer[i].txState == 0 && uart_dev[i].tx_read != uart_dev[i].tx_write)//循环队列
 472              		.loc 1 122 17 is_stmt 1 discriminator 1 view .LVU132
 122:Drivers/User_Driver/Src/soft_uart.c ****         if (uartTimer[i].txState == 0 && uart_dev[i].tx_read != uart_dev[i].tx_write)//循环队列
 473              		.loc 1 122 5 is_stmt 0 discriminator 1 view .LVU133
 474 0100 012B     		cmp	r3, #1
 475 0102 76DC     		bgt	.L37
 123:Drivers/User_Driver/Src/soft_uart.c ****         {
 476              		.loc 1 123 9 is_stmt 1 view .LVU134
 123:Drivers/User_Driver/Src/soft_uart.c ****         {
 477              		.loc 1 123 25 is_stmt 0 view .LVU135
 478 0104 03EBC301 		add	r1, r3, r3, lsl #3
 479 0108 3C4A     		ldr	r2, .L38+4
 480 010a 0A44     		add	r2, r2, r1
 481 010c 1279     		ldrb	r2, [r2, #4]	@ zero_extendqisi2
 123:Drivers/User_Driver/Src/soft_uart.c ****         {
 482              		.loc 1 123 12 view .LVU136
 483 010e 3ABB     		cbnz	r2, .L26
 123:Drivers/User_Driver/Src/soft_uart.c ****         {
 484              		.loc 1 123 53 discriminator 1 view .LVU137
 485 0110 3B49     		ldr	r1, .L38+8
 486 0112 C3EBC310 		rsb	r0, r3, r3, lsl #7
 487 0116 8200     		lsls	r2, r0, #2
 488 0118 8818     		adds	r0, r1, r2
 489 011a 8A5A     		ldrh	r2, [r1, r2]
 123:Drivers/User_Driver/Src/soft_uart.c ****         {
 490              		.loc 1 123 76 discriminator 1 view .LVU138
 491 011c 4188     		ldrh	r1, [r0, #2]
 123:Drivers/User_Driver/Src/soft_uart.c ****         {
 492              		.loc 1 123 39 discriminator 1 view .LVU139
 493 011e 8A42     		cmp	r2, r1
 494 0120 1ED0     		beq	.L26
 125:Drivers/User_Driver/Src/soft_uart.c ****             if (++(uart_dev[i].tx_read) >= SOFT_UART_TRANSMIT_LONG)	{
ARM GAS  C:\Users\86158\AppData\Local\Temp\ccHkOXur.s 			page 13


 495              		.loc 1 125 13 is_stmt 1 view .LVU140
 125:Drivers/User_Driver/Src/soft_uart.c ****             if (++(uart_dev[i].tx_read) >= SOFT_UART_TRANSMIT_LONG)	{
 496              		.loc 1 125 56 is_stmt 0 view .LVU141
 497 0122 374C     		ldr	r4, .L38+8
 498 0124 C3EBC310 		rsb	r0, r3, r3, lsl #7
 499 0128 8100     		lsls	r1, r0, #2
 500 012a 6018     		adds	r0, r4, r1
 501 012c 1044     		add	r0, r0, r2
 502 012e 90F807C0 		ldrb	ip, [r0, #7]	@ zero_extendqisi2
 125:Drivers/User_Driver/Src/soft_uart.c ****             if (++(uart_dev[i].tx_read) >= SOFT_UART_TRANSMIT_LONG)	{
 503              		.loc 1 125 33 view .LVU142
 504 0132 03EBC30E 		add	lr, r3, r3, lsl #3
 505 0136 3148     		ldr	r0, .L38+4
 506 0138 7044     		add	r0, r0, lr
 507 013a 80F808C0 		strb	ip, [r0, #8]
 126:Drivers/User_Driver/Src/soft_uart.c ****                 uart_dev[i].tx_read = 0;
 508              		.loc 1 126 13 is_stmt 1 view .LVU143
 126:Drivers/User_Driver/Src/soft_uart.c ****                 uart_dev[i].tx_read = 0;
 509              		.loc 1 126 17 is_stmt 0 view .LVU144
 510 013e 0132     		adds	r2, r2, #1
 511 0140 92B2     		uxth	r2, r2
 126:Drivers/User_Driver/Src/soft_uart.c ****                 uart_dev[i].tx_read = 0;
 512              		.loc 1 126 16 view .LVU145
 513 0142 6252     		strh	r2, [r4, r1]	@ movhi
 514 0144 B2F5967F 		cmp	r2, #300
 515 0148 04D3     		bcc	.L27
 127:Drivers/User_Driver/Src/soft_uart.c ****             }
 516              		.loc 1 127 17 is_stmt 1 view .LVU146
 127:Drivers/User_Driver/Src/soft_uart.c ****             }
 517              		.loc 1 127 37 is_stmt 0 view .LVU147
 518 014a C3EBC311 		rsb	r1, r3, r3, lsl #7
 519 014e 8A00     		lsls	r2, r1, #2
 520 0150 0020     		movs	r0, #0
 521 0152 A052     		strh	r0, [r4, r2]	@ movhi
 522              	.L27:
 129:Drivers/User_Driver/Src/soft_uart.c ****         }
 523              		.loc 1 129 13 is_stmt 1 view .LVU148
 129:Drivers/User_Driver/Src/soft_uart.c ****         }
 524              		.loc 1 129 34 is_stmt 0 view .LVU149
 525 0154 03EBC301 		add	r1, r3, r3, lsl #3
 526 0158 284A     		ldr	r2, .L38+4
 527 015a 0A44     		add	r2, r2, r1
 528 015c 0121     		movs	r1, #1
 529 015e 1171     		strb	r1, [r2, #4]
 530              	.L26:
 131:Drivers/User_Driver/Src/soft_uart.c ****             if (--(uartTimer[i].txCount) <= 0) {			//发送数据以定时器的1/3来发送
 531              		.loc 1 131 9 is_stmt 1 view .LVU150
 131:Drivers/User_Driver/Src/soft_uart.c ****             if (--(uartTimer[i].txCount) <= 0) {			//发送数据以定时器的1/3来发送
 532              		.loc 1 131 25 is_stmt 0 view .LVU151
 533 0160 03EBC301 		add	r1, r3, r3, lsl #3
 534 0164 254A     		ldr	r2, .L38+4
 535 0166 0A44     		add	r2, r2, r1
 536 0168 1279     		ldrb	r2, [r2, #4]	@ zero_extendqisi2
 131:Drivers/User_Driver/Src/soft_uart.c ****             if (--(uartTimer[i].txCount) <= 0) {			//发送数据以定时器的1/3来发送
 537              		.loc 1 131 12 view .LVU152
 538 016a 002A     		cmp	r2, #0
 539 016c C7D0     		beq	.L28
ARM GAS  C:\Users\86158\AppData\Local\Temp\ccHkOXur.s 			page 14


 132:Drivers/User_Driver/Src/soft_uart.c ****                 uartTimer[i].txCount = MULTIPLE_OF_TIEMR;				//重置发送计数器 
 540              		.loc 1 132 13 is_stmt 1 view .LVU153
 132:Drivers/User_Driver/Src/soft_uart.c ****                 uartTimer[i].txCount = MULTIPLE_OF_TIEMR;				//重置发送计数器 
 541              		.loc 1 132 32 is_stmt 0 view .LVU154
 542 016e 0A46     		mov	r2, r1
 543 0170 2249     		ldr	r1, .L38+4
 544 0172 1144     		add	r1, r1, r2
 545 0174 4A79     		ldrb	r2, [r1, #5]	@ zero_extendqisi2
 132:Drivers/User_Driver/Src/soft_uart.c ****                 uartTimer[i].txCount = MULTIPLE_OF_TIEMR;				//重置发送计数器 
 546              		.loc 1 132 17 view .LVU155
 547 0176 013A     		subs	r2, r2, #1
 548 0178 D2B2     		uxtb	r2, r2
 132:Drivers/User_Driver/Src/soft_uart.c ****                 uartTimer[i].txCount = MULTIPLE_OF_TIEMR;				//重置发送计数器 
 549              		.loc 1 132 16 view .LVU156
 550 017a 4A71     		strb	r2, [r1, #5]
 551 017c 002A     		cmp	r2, #0
 552 017e BED1     		bne	.L28
 133:Drivers/User_Driver/Src/soft_uart.c ****                 if (uartTimer[i].txBit == 0) {		    //发送计数器为0 表明单字节发送还没开始
 553              		.loc 1 133 17 is_stmt 1 view .LVU157
 133:Drivers/User_Driver/Src/soft_uart.c ****                 if (uartTimer[i].txBit == 0) {		    //发送计数器为0 表明单字节发送还没开始
 554              		.loc 1 133 38 is_stmt 0 view .LVU158
 555 0180 03EBC301 		add	r1, r3, r3, lsl #3
 556 0184 1D4A     		ldr	r2, .L38+4
 557 0186 0A44     		add	r2, r2, r1
 558 0188 0321     		movs	r1, #3
 559 018a 5171     		strb	r1, [r2, #5]
 134:Drivers/User_Driver/Src/soft_uart.c ****                     g_uart[i].busTx->BSRR = ((uint32_t)g_uart[i].pinTx << 16U);	//发送开始位     		
 560              		.loc 1 134 17 is_stmt 1 view .LVU159
 134:Drivers/User_Driver/Src/soft_uart.c ****                     g_uart[i].busTx->BSRR = ((uint32_t)g_uart[i].pinTx << 16U);	//发送开始位     		
 561              		.loc 1 134 33 is_stmt 0 view .LVU160
 562 018c 9279     		ldrb	r2, [r2, #6]	@ zero_extendqisi2
 134:Drivers/User_Driver/Src/soft_uart.c ****                     g_uart[i].busTx->BSRR = ((uint32_t)g_uart[i].pinTx << 16U);	//发送开始位     		
 563              		.loc 1 134 20 view .LVU161
 564 018e 002A     		cmp	r2, #0
 565 0190 9FD1     		bne	.L29
 135:Drivers/User_Driver/Src/soft_uart.c ****                     uartTimer[i].txData = uartTimer[i].txBuff;		//把缓冲的数据放到发送的buff		
 566              		.loc 1 135 21 is_stmt 1 view .LVU162
 135:Drivers/User_Driver/Src/soft_uart.c ****                     uartTimer[i].txData = uartTimer[i].txBuff;		//把缓冲的数据放到发送的buff		
 567              		.loc 1 135 65 is_stmt 0 view .LVU163
 568 0192 1948     		ldr	r0, .L38
 569 0194 1901     		lsls	r1, r3, #4
 570 0196 00EB0312 		add	r2, r0, r3, lsl #4
 571 019a 9288     		ldrh	r2, [r2, #4]
 135:Drivers/User_Driver/Src/soft_uart.c ****                     uartTimer[i].txData = uartTimer[i].txBuff;		//把缓冲的数据放到发送的buff		
 572              		.loc 1 135 30 view .LVU164
 573 019c 4158     		ldr	r1, [r0, r1]
 135:Drivers/User_Driver/Src/soft_uart.c ****                     uartTimer[i].txData = uartTimer[i].txBuff;		//把缓冲的数据放到发送的buff		
 574              		.loc 1 135 72 view .LVU165
 575 019e 1204     		lsls	r2, r2, #16
 135:Drivers/User_Driver/Src/soft_uart.c ****                     uartTimer[i].txData = uartTimer[i].txBuff;		//把缓冲的数据放到发送的buff		
 576              		.loc 1 135 43 view .LVU166
 577 01a0 8A61     		str	r2, [r1, #24]
 136:Drivers/User_Driver/Src/soft_uart.c ****                     uartTimer[i].txBit = UART_DATA_LENGTH;	//发送数据位数 (8数据位+1停止位)	
 578              		.loc 1 136 21 is_stmt 1 view .LVU167
 136:Drivers/User_Driver/Src/soft_uart.c ****                     uartTimer[i].txBit = UART_DATA_LENGTH;	//发送数据位数 (8数据位+1停止位)	
 579              		.loc 1 136 55 is_stmt 0 view .LVU168
 580 01a2 03EBC301 		add	r1, r3, r3, lsl #3
ARM GAS  C:\Users\86158\AppData\Local\Temp\ccHkOXur.s 			page 15


 581 01a6 154A     		ldr	r2, .L38+4
 582 01a8 0A44     		add	r2, r2, r1
 583 01aa 117A     		ldrb	r1, [r2, #8]	@ zero_extendqisi2
 136:Drivers/User_Driver/Src/soft_uart.c ****                     uartTimer[i].txBit = UART_DATA_LENGTH;	//发送数据位数 (8数据位+1停止位)	
 584              		.loc 1 136 41 view .LVU169
 585 01ac D171     		strb	r1, [r2, #7]
 137:Drivers/User_Driver/Src/soft_uart.c ****                 } else	{				                //发送计数器为非0 正在发送数据
 586              		.loc 1 137 21 is_stmt 1 view .LVU170
 137:Drivers/User_Driver/Src/soft_uart.c ****                 } else	{				                //发送计数器为非0 正在发送数据
 587              		.loc 1 137 40 is_stmt 0 view .LVU171
 588 01ae 0921     		movs	r1, #9
 589 01b0 9171     		strb	r1, [r2, #6]
 590 01b2 A4E7     		b	.L28
 591              	.L30:
 142:Drivers/User_Driver/Src/soft_uart.c ****                     }	else {                          //先发送低位bit，再发送高位bit
 143:Drivers/User_Driver/Src/soft_uart.c ****                         if (uartTimer[i].txData & 0x01) {//发送单bit数据	
 592              		.loc 1 143 25 is_stmt 1 view .LVU172
 593              		.loc 1 143 41 is_stmt 0 view .LVU173
 594 01b4 03EBC301 		add	r1, r3, r3, lsl #3
 595 01b8 104A     		ldr	r2, .L38+4
 596 01ba 0A44     		add	r2, r2, r1
 597 01bc D279     		ldrb	r2, [r2, #7]	@ zero_extendqisi2
 598              		.loc 1 143 28 view .LVU174
 599 01be 12F0010F 		tst	r2, #1
 600 01c2 0DD0     		beq	.L31
 144:Drivers/User_Driver/Src/soft_uart.c ****                             g_uart[i].busTx->BSRR = g_uart[i].pinTx;
 601              		.loc 1 144 29 is_stmt 1 view .LVU175
 602              		.loc 1 144 38 is_stmt 0 view .LVU176
 603 01c4 0C48     		ldr	r0, .L38
 604 01c6 1901     		lsls	r1, r3, #4
 605 01c8 00EB0314 		add	r4, r0, r3, lsl #4
 606 01cc 4158     		ldr	r1, [r0, r1]
 607              		.loc 1 144 62 view .LVU177
 608 01ce A088     		ldrh	r0, [r4, #4]
 609              		.loc 1 144 51 view .LVU178
 610 01d0 8861     		str	r0, [r1, #24]
 611              	.L32:
 145:Drivers/User_Driver/Src/soft_uart.c ****                         } else {
 146:Drivers/User_Driver/Src/soft_uart.c ****                             g_uart[i].busTx->BSRR = ((uint32_t)g_uart[i].pinTx << 16U);
 147:Drivers/User_Driver/Src/soft_uart.c ****                         }			
 148:Drivers/User_Driver/Src/soft_uart.c ****                         uartTimer[i].txData >>= 1;
 612              		.loc 1 148 25 is_stmt 1 view .LVU179
 613              		.loc 1 148 45 is_stmt 0 view .LVU180
 614 01d2 03EBC300 		add	r0, r3, r3, lsl #3
 615 01d6 0949     		ldr	r1, .L38+4
 616 01d8 0144     		add	r1, r1, r0
 617 01da 5208     		lsrs	r2, r2, #1
 618 01dc CA71     		strb	r2, [r1, #7]
 619 01de 8EE7     		b	.L28
 620              	.L31:
 146:Drivers/User_Driver/Src/soft_uart.c ****                         }			
 621              		.loc 1 146 29 is_stmt 1 view .LVU181
 146:Drivers/User_Driver/Src/soft_uart.c ****                         }			
 622              		.loc 1 146 73 is_stmt 0 view .LVU182
 623 01e0 054C     		ldr	r4, .L38
 624 01e2 1801     		lsls	r0, r3, #4
 625 01e4 04EB0311 		add	r1, r4, r3, lsl #4
ARM GAS  C:\Users\86158\AppData\Local\Temp\ccHkOXur.s 			page 16


 626 01e8 8988     		ldrh	r1, [r1, #4]
 146:Drivers/User_Driver/Src/soft_uart.c ****                         }			
 627              		.loc 1 146 38 view .LVU183
 628 01ea 2058     		ldr	r0, [r4, r0]
 146:Drivers/User_Driver/Src/soft_uart.c ****                         }			
 629              		.loc 1 146 80 view .LVU184
 630 01ec 0904     		lsls	r1, r1, #16
 146:Drivers/User_Driver/Src/soft_uart.c ****                         }			
 631              		.loc 1 146 51 view .LVU185
 632 01ee 8161     		str	r1, [r0, #24]
 633 01f0 EFE7     		b	.L32
 634              	.L37:
 149:Drivers/User_Driver/Src/soft_uart.c ****                     }
 150:Drivers/User_Driver/Src/soft_uart.c ****                 }
 151:Drivers/User_Driver/Src/soft_uart.c ****             }
 152:Drivers/User_Driver/Src/soft_uart.c ****         }
 153:Drivers/User_Driver/Src/soft_uart.c ****     }
 154:Drivers/User_Driver/Src/soft_uart.c **** }...
 635              		.loc 1 154 1 view .LVU186
 636 01f2 02B0     		add	sp, sp, #8
 637              	.LCFI8:
 638              		.cfi_def_cfa_offset 8
 639              		@ sp needed
 640 01f4 10BD     		pop	{r4, pc}
 641              	.L39:
 642 01f6 00BF     		.align	2
 643              	.L38:
 644 01f8 00000000 		.word	.LANCHOR0
 645 01fc 00000000 		.word	.LANCHOR1
 646 0200 00000000 		.word	.LANCHOR2
 647              		.cfi_endproc
 648              	.LFE240:
 650              		.global	uart_dev
 651              		.global	g_uart
 652              		.section	.bss.uartTimer.0,"aw",%nobits
 653              		.align	2
 654              		.set	.LANCHOR1,. + 0
 657              	uartTimer.0:
 658 0000 00000000 		.space	18
 658      00000000 
 658      00000000 
 658      00000000 
 658      0000
 659              		.section	.bss.uart_dev,"aw",%nobits
 660              		.align	2
 661              		.set	.LANCHOR2,. + 0
 664              	uart_dev:
 665 0000 00000000 		.space	1016
 665      00000000 
 665      00000000 
 665      00000000 
 665      00000000 
 666              		.section	.data.g_uart,"aw"
 667              		.align	2
 668              		.set	.LANCHOR0,. + 0
 671              	g_uart:
 672 0000 00000240 		.word	1073872896
ARM GAS  C:\Users\86158\AppData\Local\Temp\ccHkOXur.s 			page 17


 673 0004 0400     		.short	4
 674 0006 0000     		.space	2
 675 0008 00000240 		.word	1073872896
 676 000c 0800     		.short	8
 677 000e 0000     		.space	2
 678 0010 00040240 		.word	1073873920
 679 0014 0004     		.short	1024
 680 0016 0000     		.space	2
 681 0018 00040240 		.word	1073873920
 682 001c 0008     		.short	2048
 683 001e 0000     		.space	2
 684              		.text
 685              	.Letext0:
 686              		.file 2 "e:\\stm32-gcc\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\machine\\_default_
 687              		.file 3 "e:\\stm32-gcc\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\sys\\_stdint.h"
 688              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 689              		.file 5 "Drivers/User_Driver/Inc/soft_uart.h"
 690              		.file 6 "e:\\stm32-gcc\\gcc-arm-none-eabi-10.3-2021.10\\lib\\gcc\\arm-none-eabi\\10.3.1\\include\\
 691              		.file 7 "e:\\stm32-gcc\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\stdio.h"
 692              		.file 8 "e:\\stm32-gcc\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\string.h"
 693              		.file 9 "<built-in>"
ARM GAS  C:\Users\86158\AppData\Local\Temp\ccHkOXur.s 			page 18


DEFINED SYMBOLS
                            *ABS*:00000000 soft_uart.c
C:\Users\86158\AppData\Local\Temp\ccHkOXur.s:20     .text.devices_printf:00000000 $t
C:\Users\86158\AppData\Local\Temp\ccHkOXur.s:26     .text.devices_printf:00000000 devices_printf
C:\Users\86158\AppData\Local\Temp\ccHkOXur.s:148    .text.devices_receive_byte:00000000 $t
C:\Users\86158\AppData\Local\Temp\ccHkOXur.s:154    .text.devices_receive_byte:00000000 devices_receive_byte
C:\Users\86158\AppData\Local\Temp\ccHkOXur.s:250    .text.devices_receive_byte:0000005c $d
C:\Users\86158\AppData\Local\Temp\ccHkOXur.s:260    .text.uart_bus_time:00000000 $t
C:\Users\86158\AppData\Local\Temp\ccHkOXur.s:266    .text.uart_bus_time:00000000 uart_bus_time
C:\Users\86158\AppData\Local\Temp\ccHkOXur.s:644    .text.uart_bus_time:000001f8 $d
C:\Users\86158\AppData\Local\Temp\ccHkOXur.s:664    .bss.uart_dev:00000000 uart_dev
C:\Users\86158\AppData\Local\Temp\ccHkOXur.s:671    .data.g_uart:00000000 g_uart
C:\Users\86158\AppData\Local\Temp\ccHkOXur.s:653    .bss.uartTimer.0:00000000 $d
C:\Users\86158\AppData\Local\Temp\ccHkOXur.s:657    .bss.uartTimer.0:00000000 uartTimer.0
C:\Users\86158\AppData\Local\Temp\ccHkOXur.s:660    .bss.uart_dev:00000000 $d
C:\Users\86158\AppData\Local\Temp\ccHkOXur.s:667    .data.g_uart:00000000 $d

UNDEFINED SYMBOLS
memset
vsnprintf
strlen
device_Rx_Cnt
g_DeviceATStatus
g_DeviceRxBuff
control_Rx_Cnt
g_controlATStatus
g_controlRxBuff
